{
  "version": 3,
  "sources": ["scalable-function-attribute.ts"],
  "sourcesContent": ["import * as appscaling from '../../../aws-applicationautoscaling';\nimport { Token } from '../../../core';\nimport { IScalableFunctionAttribute, UtilizationScalingOptions } from '../scalable-attribute-api';\n\n// keep this import separate from other imports to reduce chance for merge conflicts with v2-main\n// eslint-disable-next-line no-duplicate-imports, import/order\nimport { Construct } from 'constructs';\n\n/**\n * A scalable lambda alias attribute\n */\nexport class ScalableFunctionAttribute extends appscaling.BaseScalableAttribute implements IScalableFunctionAttribute {\n  constructor(scope: Construct, id: string, props: ScalableFunctionAttributeProps) {\n    super(scope, id, props);\n  }\n\n  /**\n   * Scale out or in to keep utilization at a given level. The utilization is tracked by the\n   * LambdaProvisionedConcurrencyUtilization metric, emitted by lambda. See:\n   * https://docs.aws.amazon.com/lambda/latest/dg/monitoring-metrics.html#monitoring-metrics-concurrency\n   */\n  public scaleOnUtilization(options: UtilizationScalingOptions) {\n    if ( !Token.isUnresolved(options.utilizationTarget) && (options.utilizationTarget < 0.1 || options.utilizationTarget > 0.9)) {\n      throw new Error(`Utilization Target should be between 0.1 and 0.9. Found ${options.utilizationTarget}.`);\n    }\n    super.doScaleToTrackMetric('Tracking', {\n      targetValue: options.utilizationTarget,\n      predefinedMetric: appscaling.PredefinedMetric.LAMBDA_PROVISIONED_CONCURRENCY_UTILIZATION,\n      ...options,\n    });\n  }\n\n  /**\n   * Scale out or in based on schedule.\n   */\n  public scaleOnSchedule(id: string, action: appscaling.ScalingSchedule) {\n    super.doScaleOnSchedule(id, action);\n  }\n}\n\n/**\n * Properties of a scalable function attribute\n */\nexport interface ScalableFunctionAttributeProps extends appscaling.BaseScalableAttributeProps {\n}\n"],
  "mappings": "6GAAA,KAAA,YAAA,QAAA,qCAAA,EACA,OAAA,QAAA,eAAA,EAUA,MAAa,iCAAkC,YAAW,qBAAqB,CAC7E,YAAY,MAAkB,GAAY,MAAqC,CAC7E,MAAM,MAAO,GAAI,KAAK,EAQjB,mBAAmB,QAAkC,CAC1D,GAAK,CAAC,OAAA,MAAM,aAAa,QAAQ,iBAAiB,GAAM,SAAQ,kBAAoB,IAAO,QAAQ,kBAAoB,IACrH,KAAM,IAAI,OAAM,2DAA2D,QAAQ,oBAAoB,EAEzG,MAAM,qBAAqB,WAAY,CACrC,YAAa,QAAQ,kBACrB,iBAAkB,WAAW,iBAAiB,8CAC3C,QACJ,EAMI,gBAAgB,GAAY,OAAkC,CACnE,MAAM,kBAAkB,GAAI,MAAM,GAzBtC,QAAA,0BAAA",
  "names": []
}
