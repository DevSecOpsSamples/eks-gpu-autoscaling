{
  "version": 3,
  "sources": ["custom-action-registration.ts"],
  "sourcesContent": ["import { Construct } from 'constructs';\nimport { ActionCategory, ActionArtifactBounds } from './action';\nimport { CfnCustomActionType } from './codepipeline.generated';\n\n\n/**\n * The creation attributes used for defining a configuration property\n * of a custom Action.\n */\nexport interface CustomActionProperty {\n  /**\n   * The name of the property.\n   * You use this name in the `configuration` attribute when defining your custom Action class.\n   */\n  readonly name: string;\n\n  /**\n   * The description of the property.\n   *\n   * @default the description will be empty\n   */\n  readonly description?: string;\n\n  /**\n   * Whether this property is a key.\n   *\n   * @default false\n   * @see https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-codepipeline-customactiontype-configurationproperties.html#cfn-codepipeline-customactiontype-configurationproperties-key\n   */\n  readonly key?: boolean;\n\n  /**\n   * Whether this property is queryable.\n   * Note that only a single property of a custom Action can be queryable.\n   *\n   * @default false\n   * @see https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-codepipeline-customactiontype-configurationproperties.html#cfn-codepipeline-customactiontype-configurationproperties-queryable\n   */\n  readonly queryable?: boolean;\n\n  /**\n   * Whether this property is required.\n   */\n  readonly required: boolean;\n\n  /**\n   * Whether this property is secret,\n   * like a password, or access key.\n   *\n   * @default false\n   */\n  readonly secret?: boolean;\n\n  /**\n   * The type of the property,\n   * like 'String', 'Number', or 'Boolean'.\n   *\n   * @default 'String'\n   */\n  readonly type?: string;\n}\n\n/**\n * Properties of registering a custom Action.\n */\nexport interface CustomActionRegistrationProps {\n  /**\n   * The category of the Action.\n   */\n  readonly category: ActionCategory;\n\n  /**\n   * The artifact bounds of the Action.\n   */\n  readonly artifactBounds: ActionArtifactBounds;\n\n  /**\n   * The provider of the Action.\n   * For example, `'MyCustomActionProvider'`\n   */\n  readonly provider: string;\n\n  /**\n   * The version of your Action.\n   *\n   * @default '1'\n   */\n  readonly version?: string;\n\n  /**\n   * The URL shown for the entire Action in the Pipeline UI.\n   * @default none\n   */\n  readonly entityUrl?: string;\n\n  /**\n   * The URL shown for a particular execution of an Action in the Pipeline UI.\n   * @default none\n   */\n  readonly executionUrl?: string;\n\n  /**\n   * The properties used for customizing the instance of your Action.\n   *\n   * @default []\n   */\n  readonly actionProperties?: CustomActionProperty[];\n}\n\n/**\n * The resource representing registering a custom Action with CodePipeline.\n * For the Action to be usable, it has to be registered for every region and every account it's used in.\n * In addition to this class, you should most likely also provide your clients a class\n * representing your custom Action, extending the Action class,\n * and taking the `actionProperties` as properly typed, construction properties.\n */\nexport class CustomActionRegistration extends Construct {\n  constructor(scope: Construct, id: string, props: CustomActionRegistrationProps) {\n    super(scope, id);\n\n    new CfnCustomActionType(this, 'Resource', {\n      category: props.category,\n      inputArtifactDetails: {\n        minimumCount: props.artifactBounds.minInputs,\n        maximumCount: props.artifactBounds.maxInputs,\n      },\n      outputArtifactDetails: {\n        minimumCount: props.artifactBounds.minOutputs,\n        maximumCount: props.artifactBounds.maxOutputs,\n      },\n      provider: props.provider,\n      version: props.version || '1',\n      settings: {\n        entityUrlTemplate: props.entityUrl,\n        executionUrlTemplate: props.executionUrl,\n      },\n      configurationProperties: props.actionProperties?.map((ap) => {\n        return {\n          key: ap.key || false,\n          secret: ap.secret || false,\n          ...ap,\n        };\n      }),\n    });\n  }\n}\n"],
  "mappings": "+NAAA,aAAA,QAAA,YAAA,EAEA,yBAAA,QAAA,0BAAA,EAkHA,MAAa,gCAAiC,cAAA,SAAS,CACrD,YAAY,MAAkB,GAAY,MAAoC,QAC5E,MAAM,MAAO,EAAE,4FAEf,GAAI,0BAAA,oBAAoB,KAAM,WAAY,CACxC,SAAU,MAAM,SAChB,qBAAsB,CACpB,aAAc,MAAM,eAAe,UACnC,aAAc,MAAM,eAAe,WAErC,sBAAuB,CACrB,aAAc,MAAM,eAAe,WACnC,aAAc,MAAM,eAAe,YAErC,SAAU,MAAM,SAChB,QAAS,MAAM,SAAW,IAC1B,SAAU,CACR,kBAAmB,MAAM,UACzB,qBAAsB,MAAM,cAE9B,wBAAuB,IAAE,MAAM,oBAAgB,MAAA,KAAA,OAAA,OAAA,GAAE,IAAI,AAAC,IAC7C,EACL,IAAK,GAAG,KAAO,GACf,OAAQ,GAAG,QAAU,MAClB,IAEN,EACF,GA3BL,QAAA,yBAAA",
  "names": []
}
