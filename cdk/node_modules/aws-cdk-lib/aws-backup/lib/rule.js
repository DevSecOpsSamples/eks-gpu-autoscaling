"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackupPlanRule=void 0;const jsiiDeprecationWarnings=require("../../.warnings.jsii.js"),JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti"),events=require("../../aws-events"),core_1=require("../../core");class BackupPlanRule{constructor(props){var _b,_c;if(jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_BackupPlanRuleProps(props),props.deleteAfter&&props.moveToColdStorageAfter&&props.deleteAfter.toDays()<props.moveToColdStorageAfter.toDays())throw new Error("`deleteAfter` must be greater than `moveToColdStorageAfter`");if(props.scheduleExpression&&!/^cron/.test(props.scheduleExpression.expressionString))throw new Error("`scheduleExpression` must be of type `cron`");const deleteAfter=props.enableContinuousBackup&&!props.deleteAfter?core_1.Duration.days(35):props.deleteAfter;if(props.enableContinuousBackup&&props.moveToColdStorageAfter)throw new Error("`moveToColdStorageAfter` must not be specified if `enableContinuousBackup` is enabled");if(props.enableContinuousBackup&&props.deleteAfter&&(((_b=props.deleteAfter)===null||_b===void 0?void 0:_b.toDays())<1||((_c=props.deleteAfter)===null||_c===void 0?void 0:_c.toDays())>35))throw new Error(`'deleteAfter' must be between 1 and 35 days if 'enableContinuousBackup' is enabled, but got ${props.deleteAfter.toHumanString()}`);this.props={...props,deleteAfter}}static daily(backupVault){return jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_IBackupVault(backupVault),new BackupPlanRule({backupVault,ruleName:"Daily",scheduleExpression:events.Schedule.cron({hour:"5",minute:"0"}),deleteAfter:core_1.Duration.days(35)})}static weekly(backupVault){return jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_IBackupVault(backupVault),new BackupPlanRule({backupVault,ruleName:"Weekly",scheduleExpression:events.Schedule.cron({hour:"5",minute:"0",weekDay:"SAT"}),deleteAfter:core_1.Duration.days(30*3)})}static monthly1Year(backupVault){return jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_IBackupVault(backupVault),new BackupPlanRule({backupVault,ruleName:"Monthly1Year",scheduleExpression:events.Schedule.cron({day:"1",hour:"5",minute:"0"}),moveToColdStorageAfter:core_1.Duration.days(30),deleteAfter:core_1.Duration.days(365)})}static monthly5Year(backupVault){return jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_IBackupVault(backupVault),new BackupPlanRule({backupVault,ruleName:"Monthly5Year",scheduleExpression:events.Schedule.cron({day:"1",hour:"5",minute:"0"}),moveToColdStorageAfter:core_1.Duration.days(30*3),deleteAfter:core_1.Duration.days(365*5)})}static monthly7Year(backupVault){return jsiiDeprecationWarnings.aws_cdk_lib_aws_backup_IBackupVault(backupVault),new BackupPlanRule({backupVault,ruleName:"Monthly7Year",scheduleExpression:events.Schedule.cron({day:"1",hour:"5",minute:"0"}),moveToColdStorageAfter:core_1.Duration.days(30*3),deleteAfter:core_1.Duration.days(365*7)})}}exports.BackupPlanRule=BackupPlanRule,_a=JSII_RTTI_SYMBOL_1,BackupPlanRule[_a]={fqn:"aws-cdk-lib.aws_backup.BackupPlanRule",version:"2.20.0"};
//# sourceMappingURL=rule.js.map
