{
  "version": 3,
  "sources": ["emr-create-cluster.ts"],
  "sourcesContent": ["import * as iam from '../../../aws-iam';\nimport * as sfn from '../../../aws-stepfunctions';\nimport * as cdk from '../../../core';\nimport { Construct } from 'constructs';\nimport { integrationResourceArn, validatePatternSupported } from '../private/task-utils';\nimport {\n  ApplicationConfigPropertyToJson,\n  BootstrapActionConfigToJson,\n  ConfigurationPropertyToJson,\n  InstancesConfigPropertyToJson,\n  KerberosAttributesPropertyToJson,\n} from './private/cluster-utils';\n\n/**\n * Properties for EmrCreateCluster\n *\n * See the RunJobFlow API for complete documentation on input parameters\n *\n * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_RunJobFlow.html\n *\n */\nexport interface EmrCreateClusterProps extends sfn.TaskStateBaseProps {\n  /**\n   * A specification of the number and type of Amazon EC2 instances.\n   */\n  readonly instances: EmrCreateCluster.InstancesConfigProperty;\n\n  /**\n   * Also called instance profile and EC2 role. An IAM role for an EMR cluster. The EC2 instances of the cluster assume this role.\n   *\n   * This attribute has been renamed from jobFlowRole to clusterRole to align with other ERM/StepFunction integration parameters.\n   *\n   * @default - * A Role will be created\n   */\n  readonly clusterRole?: iam.IRole;\n\n  /**\n   * The Name of the Cluster\n   */\n  readonly name: string;\n\n  /**\n   * The IAM role that will be assumed by the Amazon EMR service to access AWS resources on your behalf.\n   *\n   * @default - A role will be created that Amazon EMR service can assume.\n   */\n  readonly serviceRole?: iam.IRole;\n\n  /**\n   * A JSON string for selecting additional features.\n   *\n   * @default - None\n   */\n  readonly additionalInfo?: string;\n\n  /**\n   * A case-insensitive list of applications for Amazon EMR to install and configure when launching the cluster.\n   *\n   * @default - EMR selected default\n   */\n  readonly applications?: EmrCreateCluster.ApplicationConfigProperty[];\n\n  /**\n   * An IAM role for automatic scaling policies.\n   *\n   * @default - A role will be created.\n   */\n  readonly autoScalingRole?: iam.IRole;\n\n  /**\n   * A list of bootstrap actions to run before Hadoop starts on the cluster nodes.\n   *\n   * @default - None\n   */\n  readonly bootstrapActions?: EmrCreateCluster.BootstrapActionConfigProperty[];\n\n  /**\n   * The list of configurations supplied for the EMR cluster you are creating.\n   *\n   * @default - None\n   */\n  readonly configurations?: EmrCreateCluster.ConfigurationProperty[];\n\n  /**\n   * The ID of a custom Amazon EBS-backed Linux AMI.\n   *\n   * @default - None\n   */\n  readonly customAmiId?: string;\n\n  /**\n   * The size of the EBS root device volume of the Linux AMI that is used for each EC2 instance.\n   *\n   * @default - EMR selected default\n   */\n  readonly ebsRootVolumeSize?: cdk.Size;\n\n  /**\n   * Attributes for Kerberos configuration when Kerberos authentication is enabled using a security configuration.\n   *\n   * @default - None\n   */\n  readonly kerberosAttributes?: EmrCreateCluster.KerberosAttributesProperty;\n\n  /**\n   * The location in Amazon S3 to write the log files of the job flow.\n   *\n   * @default - None\n   */\n  readonly logUri?: string;\n\n  /**\n   * The Amazon EMR release label, which determines the version of open-source application packages installed on the cluster.\n   *\n   * @default - EMR selected default\n   */\n  readonly releaseLabel?: string;\n\n  /**\n   * Specifies the way that individual Amazon EC2 instances terminate when an automatic scale-in activity occurs or an instance group is resized.\n   *\n   * @default - EMR selected default\n   */\n  readonly scaleDownBehavior?: EmrCreateCluster.EmrClusterScaleDownBehavior;\n\n  /**\n   * The name of a security configuration to apply to the cluster.\n   *\n   * @default - None\n   */\n  readonly securityConfiguration?: string;\n\n  /**\n   * Specifies the step concurrency level to allow multiple steps to run in parallel\n   *\n   * Requires EMR release label 5.28.0 or above.\n   * Must be in range [1, 256].\n   *\n   * @default 1 - no step concurrency allowed\n   */\n  readonly stepConcurrencyLevel?: number;\n\n  /**\n   * A list of tags to associate with a cluster and propagate to Amazon EC2 instances.\n   *\n   * @default - None\n   */\n  readonly tags?: { [key: string]: string };\n\n  /**\n   * A value of true indicates that all IAM users in the AWS account can perform cluster actions if they have the proper IAM policy permissions.\n   *\n   * @default true\n   */\n  readonly visibleToAllUsers?: boolean;\n}\n\n/**\n * A Step Functions Task to create an EMR Cluster.\n *\n * The ClusterConfiguration is defined as Parameters in the state machine definition.\n *\n * OUTPUT: the ClusterId.\n *\n */\nexport class EmrCreateCluster extends sfn.TaskStateBase {\n  private static readonly SUPPORTED_INTEGRATION_PATTERNS: sfn.IntegrationPattern[] = [\n    sfn.IntegrationPattern.REQUEST_RESPONSE,\n    sfn.IntegrationPattern.RUN_JOB,\n  ];\n\n  protected readonly taskPolicies?: iam.PolicyStatement[];\n  protected readonly taskMetrics?: sfn.TaskMetricsConfig;\n\n  private readonly visibleToAllUsers: boolean;\n  private readonly integrationPattern: sfn.IntegrationPattern;\n\n  private _serviceRole: iam.IRole;\n  private _clusterRole: iam.IRole;\n  private _autoScalingRole?: iam.IRole;\n\n  constructor(scope: Construct, id: string, private readonly props: EmrCreateClusterProps) {\n    super(scope, id, props);\n    this.visibleToAllUsers = this.props.visibleToAllUsers ?? true;\n    this.integrationPattern = props.integrationPattern || sfn.IntegrationPattern.RUN_JOB;\n    validatePatternSupported(this.integrationPattern, EmrCreateCluster.SUPPORTED_INTEGRATION_PATTERNS);\n\n    this._autoScalingRole = this.props.autoScalingRole;\n\n    // If the Roles are undefined then they weren't provided, so create them\n    this._serviceRole = this.props.serviceRole ?? this.createServiceRole();\n    this._clusterRole = this.props.clusterRole ?? this.createClusterRole();\n\n    // AutoScaling roles are not valid with InstanceFleet clusters.\n    // Attempt to create only if .instances.instanceFleets is undefined or empty\n    if (this.props.instances.instanceFleets === undefined || this.props.instances.instanceFleets.length === 0) {\n      this._autoScalingRole = this._autoScalingRole || this.createAutoScalingRole();\n      // If InstanceFleets are used and an AutoScaling Role is specified, throw an error\n    } else if (this._autoScalingRole !== undefined) {\n      throw new Error('Auto Scaling roles can not be specified with instance fleets.');\n    }\n\n    this.taskPolicies = this.createPolicyStatements(this._serviceRole, this._clusterRole, this._autoScalingRole);\n\n    if (this.props.releaseLabel !== undefined && !cdk.Token.isUnresolved(this.props.releaseLabel)) {\n      this.validateReleaseLabel(this.props.releaseLabel);\n    }\n\n    if (this.props.stepConcurrencyLevel !== undefined && !cdk.Token.isUnresolved(this.props.stepConcurrencyLevel)) {\n      if (this.props.stepConcurrencyLevel < 1 || this.props.stepConcurrencyLevel > 256) {\n        throw new Error(`Step concurrency level must be in range [1, 256], but got ${this.props.stepConcurrencyLevel}.`);\n      }\n      if (this.props.releaseLabel && this.props.stepConcurrencyLevel !== 1) {\n        const [major, minor] = this.props.releaseLabel.slice(4).split('.');\n        if (Number(major) < 5 || (Number(major) === 5 && Number(minor) < 28)) {\n          throw new Error(`Step concurrency is only supported in EMR release version 5.28.0 and above but got ${this.props.releaseLabel}.`);\n        }\n      }\n    }\n  }\n\n  /**\n   * The service role for the EMR Cluster.\n   *\n   * Only available after task has been added to a state machine.\n   */\n  public get serviceRole(): iam.IRole {\n    if (this._serviceRole === undefined) {\n      throw new Error('role not available yet--use the object in a Task first');\n    }\n    return this._serviceRole;\n  }\n\n  /**\n   * The instance role for the EMR Cluster.\n   *\n   * Only available after task has been added to a state machine.\n   */\n  public get clusterRole(): iam.IRole {\n    if (this._clusterRole === undefined) {\n      throw new Error('role not available yet--use the object in a Task first');\n    }\n    return this._clusterRole;\n  }\n\n  /**\n   * The autoscaling role for the EMR Cluster.\n   *\n   * Only available after task has been added to a state machine.\n   */\n  public get autoScalingRole(): iam.IRole {\n    if (this._autoScalingRole === undefined) {\n      throw new Error('role not available yet--use the object in a Task first');\n    }\n    return this._autoScalingRole;\n  }\n\n  /**\n   * @internal\n   */\n  protected _renderTask(): any {\n    return {\n      Resource: integrationResourceArn('elasticmapreduce', 'createCluster', this.integrationPattern),\n      Parameters: sfn.FieldUtils.renderObject({\n        Instances: InstancesConfigPropertyToJson(this.props.instances),\n        JobFlowRole: cdk.stringToCloudFormation(this._clusterRole.roleName),\n        Name: cdk.stringToCloudFormation(this.props.name),\n        ServiceRole: cdk.stringToCloudFormation(this._serviceRole.roleName),\n        AdditionalInfo: cdk.stringToCloudFormation(this.props.additionalInfo),\n        Applications: cdk.listMapper(ApplicationConfigPropertyToJson)(this.props.applications),\n        AutoScalingRole: cdk.stringToCloudFormation(this._autoScalingRole?.roleName),\n        BootstrapActions: cdk.listMapper(BootstrapActionConfigToJson)(this.props.bootstrapActions),\n        Configurations: cdk.listMapper(ConfigurationPropertyToJson)(this.props.configurations),\n        CustomAmiId: cdk.stringToCloudFormation(this.props.customAmiId),\n        EbsRootVolumeSize: this.props.ebsRootVolumeSize?.toGibibytes(),\n        KerberosAttributes: this.props.kerberosAttributes ? KerberosAttributesPropertyToJson(this.props.kerberosAttributes) : undefined,\n        LogUri: cdk.stringToCloudFormation(this.props.logUri),\n        ReleaseLabel: cdk.stringToCloudFormation(this.props.releaseLabel),\n        ScaleDownBehavior: cdk.stringToCloudFormation(this.props.scaleDownBehavior?.valueOf()),\n        SecurityConfiguration: cdk.stringToCloudFormation(this.props.securityConfiguration),\n        StepConcurrencyLevel: cdk.numberToCloudFormation(this.props.stepConcurrencyLevel),\n        ...(this.props.tags ? this.renderTags(this.props.tags) : undefined),\n        VisibleToAllUsers: cdk.booleanToCloudFormation(this.visibleToAllUsers),\n      }),\n    };\n  }\n\n  private renderTags(tags: { [key: string]: any } | undefined): { [key: string]: any } {\n    return tags ? { Tags: Object.keys(tags).map((key) => ({ Key: key, Value: tags[key] })) } : {};\n  }\n\n  /**\n   * This generates the PolicyStatements required by the Task to call CreateCluster.\n   */\n  private createPolicyStatements(serviceRole: iam.IRole, clusterRole: iam.IRole, autoScalingRole?: iam.IRole): iam.PolicyStatement[] {\n    const stack = cdk.Stack.of(this);\n\n    const policyStatements = [\n      new iam.PolicyStatement({\n        actions: ['elasticmapreduce:RunJobFlow', 'elasticmapreduce:DescribeCluster', 'elasticmapreduce:TerminateJobFlows'],\n        resources: ['*'],\n      }),\n    ];\n\n    // Allow the StateMachine to PassRole to Cluster roles\n    policyStatements.push(\n      new iam.PolicyStatement({\n        actions: ['iam:PassRole'],\n        resources: [serviceRole.roleArn, clusterRole.roleArn],\n      }),\n    );\n    if (autoScalingRole !== undefined) {\n      policyStatements.push(\n        new iam.PolicyStatement({\n          actions: ['iam:PassRole'],\n          resources: [autoScalingRole.roleArn],\n        }),\n      );\n    }\n\n    if (this.integrationPattern === sfn.IntegrationPattern.RUN_JOB) {\n      policyStatements.push(\n        new iam.PolicyStatement({\n          actions: ['events:PutTargets', 'events:PutRule', 'events:DescribeRule'],\n          resources: [\n            stack.formatArn({\n              service: 'events',\n              resource: 'rule',\n              resourceName: 'StepFunctionsGetEventForEMRRunJobFlowRule',\n            }),\n          ],\n        }),\n      );\n    }\n\n    return policyStatements;\n  }\n\n  /**\n   * Generate the Role used by the EMR Service\n   */\n  private createServiceRole(): iam.IRole {\n    return new iam.Role(this, 'ServiceRole', {\n      assumedBy: new iam.ServicePrincipal('elasticmapreduce.amazonaws.com'),\n      managedPolicies: [iam.ManagedPolicy.fromAwsManagedPolicyName('service-role/AmazonElasticMapReduceRole')],\n    });\n  }\n\n  /**\n   * Generate the Role and Instance Profile used by the EC2 instances\n   *\n   * Data access permissions will need to be updated by the user\n   */\n  private createClusterRole(): iam.IRole {\n    const role = new iam.Role(this, 'InstanceRole', {\n      assumedBy: new iam.ServicePrincipal('ec2.amazonaws.com'),\n    });\n\n    new iam.CfnInstanceProfile(this, 'InstanceProfile', {\n      roles: [role.roleName],\n      instanceProfileName: role.roleName,\n    });\n\n    return role;\n  }\n\n  /**\n   * Generate the Role used to AutoScale the Cluster\n   */\n  private createAutoScalingRole(): iam.IRole {\n    const role = new iam.Role(this, 'AutoScalingRole', {\n      assumedBy: new iam.ServicePrincipal('elasticmapreduce.amazonaws.com'),\n      managedPolicies: [iam.ManagedPolicy.fromAwsManagedPolicyName('service-role/AmazonElasticMapReduceforAutoScalingRole')],\n    });\n\n    role.assumeRolePolicy?.addStatements(\n      new iam.PolicyStatement({\n        effect: iam.Effect.ALLOW,\n        principals: [new iam.ServicePrincipal('application-autoscaling.amazonaws.com')],\n        actions: ['sts:AssumeRole'],\n      }),\n    );\n\n    return role;\n  }\n\n  /**\n   * Validates the release label string is in proper format.\n   * Release labels are in the form `emr-x.x.x`. For example, `emr-5.33.0`.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-release-components.html\n   */\n  private validateReleaseLabel(releaseLabel: string): string {\n    const prefix = releaseLabel.slice(0, 4);\n    const versions = releaseLabel.slice(4).split('.');\n    if (prefix !== 'emr-' || versions.length !== 3 || versions.some((e) => isNotANumber(e))) {\n      throw new Error(`The release label must be in the format 'emr-x.x.x' but got ${releaseLabel}`);\n    }\n    return releaseLabel;\n\n    function isNotANumber(value: string): boolean {\n      return value === '' || isNaN(Number(value));\n    }\n  }\n}\n\nexport namespace EmrCreateCluster {\n  /**\n   * The Cluster ScaleDownBehavior specifies the way that individual Amazon EC2 instances terminate when an automatic scale-in activity\n   * occurs or an instance group is resized.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_RunJobFlow.html#EMR-RunJobFlow-request-ScaleDownBehavior\n   */\n  export enum EmrClusterScaleDownBehavior {\n    /**\n     * Indicates that Amazon EMR terminates nodes at the instance-hour boundary, regardless of when the request to terminate the instance was\n     * submitted. This option is only available with Amazon EMR 5.1.0 and later and is the default for clusters created using that version\n     */\n    TERMINATE_AT_INSTANCE_HOUR = 'TERMINATE_AT_INSTANCE_HOUR',\n\n    /**\n     * Indicates that Amazon EMR adds nodes to a deny list and drains tasks from nodes before terminating the Amazon EC2 instances, regardless of the\n     * instance-hour boundary.\n     */\n    TERMINATE_AT_TASK_COMPLETION = 'TERMINATE_AT_TASK_COMPLETION',\n  }\n\n  /**\n   * Instance Role Types\n   *\n   */\n  export enum InstanceRoleType {\n    /**\n     * Master Node\n     */\n    MASTER = 'MASTER',\n    /**\n     * Core Node\n     */\n    CORE = 'CORE',\n    /**\n     * Task Node\n     */\n    TASK = 'TASK',\n  }\n\n  /**\n   * EBS Volume Types\n   *\n   */\n  export enum EbsBlockDeviceVolumeType {\n    /**\n     * gp2 Volume Type\n     */\n    GP2 = 'gp2',\n    /**\n     * io1 Volume Type\n     */\n    IO1 = 'io1',\n    /**\n     * Standard Volume Type\n     */\n    STANDARD = 'standard',\n  }\n\n  /**\n   * EBS volume specifications such as volume type, IOPS, and size (GiB) that will be requested for the EBS volume attached\n   * to an EC2 instance in the cluster.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_VolumeSpecification.html\n   *\n   */\n  export interface VolumeSpecificationProperty {\n    /**\n     * The number of I/O operations per second (IOPS) that the volume supports.\n     *\n     * @default - EMR selected default\n     */\n    readonly iops?: number;\n\n    /**\n     * The volume size. If the volume type is EBS-optimized, the minimum value is 10GiB.\n     * Maximum size is 1TiB\n     */\n    readonly volumeSize: cdk.Size;\n\n    /**\n     * The volume type. Volume types supported are gp2, io1, standard.\n     */\n    readonly volumeType: EbsBlockDeviceVolumeType;\n  }\n\n  /**\n   * Configuration of requested EBS block device associated with the instance group with count of volumes that will be\n   * associated to every instance.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_EbsBlockDeviceConfig.html\n   *\n   */\n  export interface EbsBlockDeviceConfigProperty {\n    /**\n     * EBS volume specifications such as volume type, IOPS, and size (GiB) that will be requested for the EBS volume attached to an EC2\n     * instance in the cluster.\n     */\n    readonly volumeSpecification: VolumeSpecificationProperty;\n\n    /**\n     * Number of EBS volumes with a specific volume configuration that will be associated with every instance in the instance group\n     *\n     * @default EMR selected default\n     */\n    readonly volumesPerInstance?: number;\n  }\n\n  /**\n   * The Amazon EBS configuration of a cluster instance.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_EbsConfiguration.html\n   *\n   */\n  export interface EbsConfigurationProperty {\n    /**\n     * An array of Amazon EBS volume specifications attached to a cluster instance.\n     *\n     * @default - None\n     */\n    readonly ebsBlockDeviceConfigs?: EbsBlockDeviceConfigProperty[];\n\n    /**\n     * Indicates whether an Amazon EBS volume is EBS-optimized.\n     *\n     * @default - EMR selected default\n     */\n    readonly ebsOptimized?: boolean;\n  }\n\n  /**\n   * An instance type configuration for each instance type in an instance fleet, which determines the EC2 instances Amazon EMR attempts to\n   * provision to fulfill On-Demand and Spot target capacities.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceTypeConfig.html\n   *\n   */\n  export interface InstanceTypeConfigProperty {\n    /**\n     * The bid price for each EC2 Spot instance type as defined by InstanceType. Expressed in USD.\n     *\n     * @default - None\n     */\n    readonly bidPrice?: string;\n\n    /**\n     * The bid price, as a percentage of On-Demand price.\n     *\n     * @default - None\n     */\n    readonly bidPriceAsPercentageOfOnDemandPrice?: number;\n\n    /**\n     * A configuration classification that applies when provisioning cluster instances, which can include configurations for applications\n     * and software that run on the cluster.\n     *\n     * @default - None\n     */\n    readonly configurations?: ConfigurationProperty[];\n\n    /**\n     * The configuration of Amazon Elastic Block Storage (EBS) attached to each instance as defined by InstanceType.\n     *\n     * @default - None\n     */\n    readonly ebsConfiguration?: EbsConfigurationProperty;\n\n    /**\n     * An EC2 instance type\n     */\n    readonly instanceType: string;\n\n    /**\n     * The number of units that a provisioned instance of this type provides toward fulfilling the target capacities defined\n     * in the InstanceFleetConfig.\n     *\n     * @default - None\n     */\n    readonly weightedCapacity?: number;\n  }\n\n  /**\n   * Spot Timeout Actions\n   *\n   */\n  export enum SpotTimeoutAction {\n    /**\n     * SWITCH_TO_ON_DEMAND\n     */\n    SWITCH_TO_ON_DEMAND = 'SWITCH_TO_ON_DEMAND',\n    /**\n     * TERMINATE_CLUSTER\n     */\n    TERMINATE_CLUSTER = 'TERMINATE_CLUSTER',\n  }\n\n  /**\n   * Spot Allocation Strategies\n   *\n   * Specifies the strategy to use in launching Spot Instance fleets. For example, \"capacity-optimized\" launches instances from Spot Instance pools with optimal capacity for the number of instances that are launching.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_SpotProvisioningSpecification.html\n   *\n   */\n  export enum SpotAllocationStrategy {\n    /**\n     * Capacity-optimized, which launches instances from Spot Instance pools with optimal capacity for the number of instances that are launching.\n     */\n    CAPACITY_OPTIMIZED = 'capacity-optimized',\n  }\n\n  /**\n   * The launch specification for Spot instances in the instance fleet, which determines the defined duration and provisioning timeout behavior.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_SpotProvisioningSpecification.html\n   *\n   */\n  export interface SpotProvisioningSpecificationProperty {\n    /**\n     * Specifies the strategy to use in launching Spot Instance fleets.\n     *\n     * @default - No allocation strategy, i.e. spot instance type will be chosen based on current price only\n     */\n    readonly allocationStrategy?: SpotAllocationStrategy;\n    /**\n     * The defined duration for Spot instances (also known as Spot blocks) in minutes.\n     *\n     * @default - No blockDurationMinutes\n     */\n    readonly blockDurationMinutes?: number;\n\n    /**\n     * The action to take when TargetSpotCapacity has not been fulfilled when the TimeoutDurationMinutes has expired\n     */\n    readonly timeoutAction: SpotTimeoutAction;\n\n    /**\n     * The spot provisioning timeout period in minutes.\n     */\n    readonly timeoutDurationMinutes: number;\n  }\n\n  /**\n   * The launch specification for Spot instances in the fleet, which determines the defined duration and provisioning timeout behavior.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceFleetProvisioningSpecifications.html\n   *\n   */\n  export interface InstanceFleetProvisioningSpecificationsProperty {\n    /**\n     * The launch specification for Spot instances in the fleet, which determines the defined duration and provisioning timeout behavior.\n     */\n    readonly spotSpecification: SpotProvisioningSpecificationProperty;\n  }\n\n  /**\n   * The configuration that defines an instance fleet.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceFleetConfig.html\n   *\n   */\n  export interface InstanceFleetConfigProperty {\n    /**\n     * The node type that the instance fleet hosts. Valid values are MASTER,CORE,and TASK.\n     */\n    readonly instanceFleetType: InstanceRoleType;\n\n    /**\n     * The instance type configurations that define the EC2 instances in the instance fleet.\n     *\n     * @default No instanceTpeConfigs\n     */\n    readonly instanceTypeConfigs?: InstanceTypeConfigProperty[];\n\n    /**\n     * The launch specification for the instance fleet.\n     *\n     * @default No launchSpecifications\n     */\n    readonly launchSpecifications?: InstanceFleetProvisioningSpecificationsProperty;\n\n    /**\n     * The friendly name of the instance fleet.\n     *\n     * @default No name\n     */\n    readonly name?: string;\n\n    /**\n     * The target capacity of On-Demand units for the instance fleet, which determines how many On-Demand instances to provision.\n     *\n     * @default No targetOnDemandCapacity\n     */\n    readonly targetOnDemandCapacity?: number;\n\n    /**\n     * The target capacity of Spot units for the instance fleet, which determines how many Spot instances to provision\n     *\n     * @default No targetSpotCapacity\n     */\n    readonly targetSpotCapacity?: number;\n  }\n\n  /**\n   * CloudWatch Alarm Comparison Operators\n   *\n   */\n  export enum CloudWatchAlarmComparisonOperator {\n    /**\n     * GREATER_THAN_OR_EQUAL\n     */\n    GREATER_THAN_OR_EQUAL = 'GREATER_THAN_OR_EQUAL',\n    /**\n     * GREATER_THAN\n     */\n    GREATER_THAN = 'GREATER_THAN',\n    /**\n     * LESS_THAN\n     */\n    LESS_THAN = 'LESS_THAN',\n    /**\n     * LESS_THAN_OR_EQUAL\n     */\n    LESS_THAN_OR_EQUAL = 'LESS_THAN_OR_EQUAL',\n  }\n\n  /**\n   * CloudWatch Alarm Statistics\n   *\n   */\n  export enum CloudWatchAlarmStatistic {\n    /**\n     * SAMPLE_COUNT\n     */\n    SAMPLE_COUNT = 'SAMPLE_COUNT',\n    /**\n     * AVERAGE\n     */\n    AVERAGE = 'AVERAGE',\n    /**\n     * SUM\n     */\n    SUM = 'SUM',\n    /**\n     * MINIMUM\n     */\n    MINIMUM = 'MINIMUM',\n    /**\n     * MAXIMUM\n     */\n    MAXIMUM = 'MAXIMUM',\n  }\n\n  /**\n   * CloudWatch Alarm Units\n   *\n   */\n  export enum CloudWatchAlarmUnit {\n    /**\n     * NONE\n     */\n    NONE = 'NONE',\n    /**\n     * SECONDS\n     */\n    SECONDS = 'SECONDS',\n    /**\n     * MICRO_SECONDS\n     */\n    MICRO_SECONDS = 'MICRO_SECONDS',\n    /**\n     * MILLI_SECONDS\n     */\n    MILLI_SECONDS = 'MILLI_SECONDS',\n    /**\n     * BYTES\n     */\n    BYTES = 'BYTES',\n    /**\n     * KILO_BYTES\n     */\n    KILO_BYTES = 'KILO_BYTES',\n    /**\n     * MEGA_BYTES\n     */\n    MEGA_BYTES = 'MEGA_BYTES',\n    /**\n     * GIGA_BYTES\n     */\n    GIGA_BYTES = 'GIGA_BYTES',\n    /**\n     * TERA_BYTES\n     */\n    TERA_BYTES = 'TERA_BYTES',\n    /**\n     * BITS\n     */\n    BITS = 'BITS',\n    /**\n     * KILO_BITS\n     */\n    KILO_BITS = 'KILO_BITS',\n    /**\n     * MEGA_BITS\n     */\n    MEGA_BITS = 'MEGA_BITS',\n    /**\n     * GIGA_BITS\n     */\n    GIGA_BITS = 'GIGA_BITS',\n    /**\n     * TERA_BITS\n     */\n    TERA_BITS = 'TERA_BITS',\n    /**\n     * PERCENT\n     */\n    PERCENT = 'PERCENT',\n    /**\n     * COUNT\n     */\n    COUNT = 'COUNT',\n    /**\n     * BYTES_PER_SECOND\n     */\n    BYTES_PER_SECOND = 'BYTES_PER_SECOND',\n    /**\n     * KILO_BYTES_PER_SECOND\n     */\n    KILO_BYTES_PER_SECOND = 'KILO_BYTES_PER_SECOND',\n    /**\n     * MEGA_BYTES_PER_SECOND\n     */\n    MEGA_BYTES_PER_SECOND = 'MEGA_BYTES_PER_SECOND',\n    /**\n     * GIGA_BYTES_PER_SECOND\n     */\n    GIGA_BYTES_PER_SECOND = 'GIGA_BYTES_PER_SECOND',\n    /**\n     * TERA_BYTES_PER_SECOND\n     */\n    TERA_BYTES_PER_SECOND = 'TERA_BYTES_PER_SECOND',\n    /**\n     * BITS_PER_SECOND\n     */\n    BITS_PER_SECOND = 'BITS_PER_SECOND',\n    /**\n     * KILO_BITS_PER_SECOND\n     */\n    KILO_BITS_PER_SECOND = 'KILO_BITS_PER_SECOND',\n    /**\n     * MEGA_BITS_PER_SECOND\n     */\n    MEGA_BITS_PER_SECOND = 'MEGA_BITS_PER_SECOND',\n    /**\n     * GIGA_BITS_PER_SECOND\n     */\n    GIGA_BITS_PER_SECOND = 'GIGA_BITS_PER_SECOND',\n    /**\n     * TERA_BITS_PER_SECOND\n     */\n    TERA_BITS_PER_SECOND = 'TERA_BITS_PER_SECOND',\n    /**\n     * COUNT_PER_SECOND\n     */\n    COUNT_PER_SECOND = 'COUNT_PER_SECOND',\n  }\n\n  /**\n   * A CloudWatch dimension, which is specified using a Key (known as a Name in CloudWatch), Value pair. By default, Amazon EMR uses\n   * one dimension whose Key is JobFlowID and Value is a variable representing the cluster ID, which is ${emr.clusterId}. This enables\n   * the rule to bootstrap when the cluster ID becomes available\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_MetricDimension.html\n   *\n   */\n  export interface MetricDimensionProperty {\n    /**\n     * The dimension name\n     */\n    readonly key: string;\n\n    /**\n     * The dimension value\n     */\n    readonly value: string;\n  }\n\n  /**\n   * The definition of a CloudWatch metric alarm, which determines when an automatic scaling activity is triggered. When the defined alarm conditions\n   * are satisfied, scaling activity begins.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_CloudWatchAlarmDefinition.html\n   *\n   */\n  export interface CloudWatchAlarmDefinitionProperty {\n    /**\n     * Determines how the metric specified by MetricName is compared to the value specified by Threshold\n     */\n    readonly comparisonOperator: CloudWatchAlarmComparisonOperator;\n\n    /**\n     * A CloudWatch metric dimension\n     *\n     * @default - No dimensions\n     */\n    readonly dimensions?: MetricDimensionProperty[];\n\n    /**\n     * The number of periods, in five-minute increments, during which the alarm condition must exist before the alarm triggers automatic\n     * scaling activity.\n     *\n     * @default 1\n     */\n    readonly evaluationPeriods?: number;\n\n    /**\n     * The name of the CloudWatch metric that is watched to determine an alarm condition.\n     */\n    readonly metricName: string;\n\n    /**\n     * The namespace for the CloudWatch metric.\n     *\n     * @default 'AWS/ElasticMapReduce'\n     */\n    readonly namespace?: string;\n\n    /**\n     * The period, in seconds, over which the statistic is applied. EMR CloudWatch metrics are emitted every five minutes (300 seconds), so if\n     * an EMR CloudWatch metric is specified, specify 300.\n     */\n    readonly period: cdk.Duration;\n\n    /**\n     * The statistic to apply to the metric associated with the alarm.\n     *\n     * @default CloudWatchAlarmStatistic.AVERAGE\n     */\n    readonly statistic?: CloudWatchAlarmStatistic;\n\n    /**\n     * The value against which the specified statistic is compared.\n     *\n     * @default - None\n     */\n    readonly threshold?: number;\n\n    /**\n     * The unit of measure associated with the CloudWatch metric being watched. The value specified for Unit must correspond to the units\n     * specified in the CloudWatch metric.\n     *\n     * @default CloudWatchAlarmUnit.NONE\n     */\n    readonly unit?: CloudWatchAlarmUnit;\n  }\n\n  /**\n   * The conditions that trigger an automatic scaling activity and the definition of a CloudWatch metric alarm.\n   * When the defined alarm conditions are met along with other trigger parameters, scaling activity begins.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ScalingTrigger.html\n   *\n   */\n  export interface ScalingTriggerProperty {\n    /**\n     * The definition of a CloudWatch metric alarm. When the defined alarm conditions are met along with other trigger parameters,\n     * scaling activity begins.\n     */\n    readonly cloudWatchAlarmDefinition: CloudWatchAlarmDefinitionProperty;\n  }\n\n  /**\n   * EC2 Instance Market\n   *\n   */\n  export enum InstanceMarket {\n    /**\n     * On Demand Instance\n     */\n    ON_DEMAND = 'ON_DEMAND',\n    /**\n     * Spot Instance\n     */\n    SPOT = 'SPOT',\n  }\n\n  /**\n   * AutoScaling Adjustment Type\n   *\n   */\n  export enum ScalingAdjustmentType {\n    /**\n     * CHANGE_IN_CAPACITY\n     */\n    CHANGE_IN_CAPACITY = 'CHANGE_IN_CAPACITY',\n    /**\n     * PERCENT_CHANGE_IN_CAPACITY\n     */\n    PERCENT_CHANGE_IN_CAPACITY = 'PERCENT_CHANGE_IN_CAPACITY',\n    /**\n     * EXACT_CAPACITY\n     */\n    EXACT_CAPACITY = 'EXACT_CAPACITY',\n  }\n\n  /**\n   * An automatic scaling configuration, which describes how the policy adds or removes instances, the cooldown period, and the number of EC2\n   * instances that will be added each time the CloudWatch metric alarm condition is satisfied.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_SimpleScalingPolicyConfiguration.html\n   *\n   */\n  export interface SimpleScalingPolicyConfigurationProperty {\n    /**\n     * The way in which EC2 instances are added (if ScalingAdjustment is a positive number) or terminated (if ScalingAdjustment is a negative\n     * number) each time the scaling activity is triggered.\n     *\n     * @default - None\n     */\n    readonly adjustmentType?: ScalingAdjustmentType;\n\n    /**\n     * The amount of time, in seconds, after a scaling activity completes before any further trigger-related scaling activities can start.\n     *\n     * @default 0\n     */\n    readonly coolDown?: number;\n\n    /**\n     * The amount by which to scale in or scale out, based on the specified AdjustmentType. A positive value adds to the instance group's\n     * EC2 instance count while a negative number removes instances. If AdjustmentType is set to EXACT_CAPACITY, the number should only be\n     * a positive integer.\n     */\n    readonly scalingAdjustment: number;\n  }\n\n  /**\n   * The type of adjustment the automatic scaling activity makes when triggered, and the periodicity of the adjustment.\n   * And an automatic scaling configuration, which describes how the policy adds or removes instances, the cooldown period,\n   * and the number of EC2 instances that will be added each time the CloudWatch metric alarm condition is satisfied.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ScalingAction.html\n   *\n   */\n  export interface ScalingActionProperty {\n    /**\n     * Not available for instance groups. Instance groups use the market type specified for the group.\n     *\n     * @default - EMR selected default\n     */\n    readonly market?: InstanceMarket;\n\n    /**\n     * The type of adjustment the automatic scaling activity makes when triggered, and the periodicity of the adjustment.\n     */\n    readonly simpleScalingPolicyConfiguration: SimpleScalingPolicyConfigurationProperty;\n  }\n\n  /**\n   * A scale-in or scale-out rule that defines scaling activity, including the CloudWatch metric alarm that triggers activity, how EC2\n   * instances are added or removed, and the periodicity of adjustments.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ScalingRule.html\n   *\n   */\n  export interface ScalingRuleProperty {\n    /**\n     * The conditions that trigger an automatic scaling activity.\n     */\n    readonly action: ScalingActionProperty;\n\n    /**\n     * A friendly, more verbose description of the automatic scaling rule.\n     *\n     * @default - None\n     */\n    readonly description?: string;\n\n    /**\n     * The name used to identify an automatic scaling rule. Rule names must be unique within a scaling policy.\n     */\n    readonly name: string;\n\n    /**\n     * The CloudWatch alarm definition that determines when automatic scaling activity is triggered.\n     */\n    readonly trigger: ScalingTriggerProperty;\n  }\n\n  /**\n   * The upper and lower EC2 instance limits for an automatic scaling policy. Automatic scaling activities triggered by automatic scaling\n   * rules will not cause an instance group to grow above or below these limits.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ScalingConstraints.html\n   *\n   */\n  export interface ScalingConstraintsProperty {\n    /**\n     * The upper boundary of EC2 instances in an instance group beyond which scaling activities are not allowed to grow. Scale-out\n     * activities will not add instances beyond this boundary.\n     */\n    readonly maxCapacity: number;\n\n    /**\n     * The lower boundary of EC2 instances in an instance group below which scaling activities are not allowed to shrink. Scale-in\n     * activities will not terminate instances below this boundary.\n     */\n    readonly minCapacity: number;\n  }\n\n  /**\n   * An automatic scaling policy for a core instance group or task instance group in an Amazon EMR cluster.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_AutoScalingPolicy.html\n   *\n   */\n  export interface AutoScalingPolicyProperty {\n    /**\n     * The upper and lower EC2 instance limits for an automatic scaling policy. Automatic scaling activity will not cause an instance\n     * group to grow above or below these limits.\n     */\n    readonly constraints: ScalingConstraintsProperty;\n\n    /**\n     * The scale-in and scale-out rules that comprise the automatic scaling policy.\n     */\n    readonly rules: ScalingRuleProperty[];\n  }\n\n  /**\n   * Configuration defining a new instance group.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_InstanceGroupConfig.html\n   *\n   */\n  export interface InstanceGroupConfigProperty {\n    /**\n     * An automatic scaling policy for a core instance group or task instance group in an Amazon EMR cluster.\n     *\n     * @default - None\n     */\n    readonly autoScalingPolicy?: AutoScalingPolicyProperty;\n\n    /**\n     * The bid price for each EC2 Spot instance type as defined by InstanceType. Expressed in USD.\n     *\n     * @default - None\n     */\n    readonly bidPrice?: string;\n\n    /**\n     * The list of configurations supplied for an EMR cluster instance group.\n     *\n     * @default - None\n     */\n    readonly configurations?: ConfigurationProperty[];\n\n    /**\n     * EBS configurations that will be attached to each EC2 instance in the instance group.\n     *\n     * @default - None\n     */\n    readonly ebsConfiguration?: EbsConfigurationProperty;\n\n    /**\n     * Target number of instances for the instance group.\n     */\n    readonly instanceCount: number;\n\n    /**\n     * The role of the instance group in the cluster.\n     */\n    readonly instanceRole: InstanceRoleType;\n\n    /**\n     * The EC2 instance type for all instances in the instance group.\n     */\n    readonly instanceType: string;\n\n    /**\n     * Market type of the EC2 instances used to create a cluster node.\n     *\n     * @default - EMR selected default\n     */\n    readonly market?: InstanceMarket;\n\n    /**\n     * Friendly name given to the instance group.\n     *\n     * @default - None\n     */\n    readonly name?: string;\n  }\n\n  /**\n   * The Amazon EC2 Availability Zone configuration of the cluster (job flow).\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_PlacementType.html\n   *\n   */\n  export interface PlacementTypeProperty {\n    /**\n     * The Amazon EC2 Availability Zone for the cluster. AvailabilityZone is used for uniform instance groups, while AvailabilityZones\n     * (plural) is used for instance fleets.\n     *\n     * @default - EMR selected default\n     */\n    readonly availabilityZone?: string;\n\n    /**\n     * When multiple Availability Zones are specified, Amazon EMR evaluates them and launches instances in the optimal Availability Zone.\n     * AvailabilityZones is used for instance fleets, while AvailabilityZone (singular) is used for uniform instance groups.\n     *\n     * @default - EMR selected default\n     */\n    readonly availabilityZones?: string[];\n  }\n\n  /**\n   * A specification of the number and type of Amazon EC2 instances.\n   *\n   * See the RunJobFlow API for complete documentation on input parameters\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_JobFlowInstancesConfig.html\n   *\n   */\n  export interface InstancesConfigProperty {\n    /**\n     * A list of additional Amazon EC2 security group IDs for the master node.\n     *\n     * @default - None\n     */\n    readonly additionalMasterSecurityGroups?: string[];\n\n    /**\n     * A list of additional Amazon EC2 security group IDs for the core and task nodes.\n     *\n     * @default - None\n     */\n    readonly additionalSlaveSecurityGroups?: string[];\n\n    /**\n     * The name of the EC2 key pair that can be used to ssh to the master node as the user called \"hadoop.\"\n     *\n     * @default - None\n     */\n    readonly ec2KeyName?: string;\n\n    /**\n     * Applies to clusters that use the uniform instance group configuration. To launch the cluster in Amazon Virtual Private Cloud (Amazon VPC),\n     * set this parameter to the identifier of the Amazon VPC subnet where you want the cluster to launch.\n     *\n     * @default EMR selected default\n     */\n    readonly ec2SubnetId?: string;\n\n    /**\n     * Applies to clusters that use the instance fleet configuration. When multiple EC2 subnet IDs are specified, Amazon EMR evaluates them and\n     * launches instances in the optimal subnet.\n     *\n     * @default EMR selected default\n     */\n    readonly ec2SubnetIds?: string[];\n\n    /**\n     * The identifier of the Amazon EC2 security group for the master node.\n     *\n     * @default - None\n     */\n    readonly emrManagedMasterSecurityGroup?: string;\n\n    /**\n     * The identifier of the Amazon EC2 security group for the core and task nodes.\n     *\n     * @default - None\n     */\n    readonly emrManagedSlaveSecurityGroup?: string;\n\n    /**\n     * Applies only to Amazon EMR release versions earlier than 4.0. The Hadoop version for the cluster.\n     *\n     * @default - 0.18 if the AmiVersion parameter is not set. If AmiVersion is set, the version of Hadoop for that AMI version is used.\n     */\n    readonly hadoopVersion?: string;\n\n    /**\n     * The number of EC2 instances in the cluster.\n     *\n     * @default 0\n     */\n    readonly instanceCount?: number;\n\n    /**\n     * Describes the EC2 instances and instance configurations for clusters that use the instance fleet configuration.\n     * The instance fleet configuration is available only in Amazon EMR versions 4.8.0 and later, excluding 5.0.x versions.\n     *\n     * @default - None\n     */\n    readonly instanceFleets?: InstanceFleetConfigProperty[];\n\n    /**\n     * Configuration for the instance groups in a cluster.\n     *\n     * @default - None\n     */\n    readonly instanceGroups?: InstanceGroupConfigProperty[];\n\n    /**\n     * The EC2 instance type of the master node.\n     *\n     * @default - None\n     */\n    readonly masterInstanceType?: string;\n\n    /**\n     * The Availability Zone in which the cluster runs.\n     *\n     * @default - EMR selected default\n     */\n    readonly placement?: PlacementTypeProperty;\n\n    /**\n     * The identifier of the Amazon EC2 security group for the Amazon EMR service to access clusters in VPC private subnets.\n     *\n     * @default - None\n     */\n    readonly serviceAccessSecurityGroup?: string;\n\n    /**\n     * The EC2 instance type of the core and task nodes.\n     *\n     * @default - None\n     */\n    readonly slaveInstanceType?: string;\n\n    /**\n     * Specifies whether to lock the cluster to prevent the Amazon EC2 instances from being terminated by API call, user intervention,\n     * or in the event of a job-flow error.\n     *\n     * @default false\n     */\n    readonly terminationProtected?: boolean;\n  }\n\n  /**\n   * Properties for the EMR Cluster Applications\n   *\n   * Applies to Amazon EMR releases 4.0 and later. A case-insensitive list of applications for Amazon EMR to install and configure when launching\n   * the cluster.\n   *\n   * See the RunJobFlow API for complete documentation on input parameters\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_Application.html\n   *\n   */\n  export interface ApplicationConfigProperty {\n    /**\n     * This option is for advanced users only. This is meta information about third-party applications that third-party vendors use\n     * for testing purposes.\n     *\n     * @default No additionalInfo\n     */\n    readonly additionalInfo?: { [key: string]: string };\n\n    /**\n     * Arguments for Amazon EMR to pass to the application.\n     *\n     * @default No args\n     */\n    readonly args?: string[];\n\n    /**\n     * The name of the application.\n     */\n    readonly name: string;\n\n    /**\n     * The version of the application.\n     *\n     * @default No version\n     */\n    readonly version?: string;\n  }\n\n  /**\n   * Configuration of the script to run during a bootstrap action.\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_ScriptBootstrapActionConfig.html\n   *\n   */\n  export interface ScriptBootstrapActionConfigProperty {\n    /**\n     * Location of the script to run during a bootstrap action. Can be either a location in Amazon S3 or on a local file system.\n     */\n    readonly path: string;\n\n    /**\n     * A list of command line arguments to pass to the bootstrap action script.\n     *\n     * @default No args\n     */\n    readonly args?: string[];\n  }\n\n  /**\n   * Configuration of a bootstrap action.\n   *\n   * See the RunJobFlow API for complete documentation on input parameters\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_BootstrapActionConfig.html\n   *\n   */\n  export interface BootstrapActionConfigProperty {\n    /**\n     * The name of the bootstrap action.\n     */\n    readonly name: string;\n\n    /**\n     * The script run by the bootstrap action\n     */\n    readonly scriptBootstrapAction: ScriptBootstrapActionConfigProperty;\n  }\n\n  /**\n   * An optional configuration specification to be used when provisioning cluster instances, which can include configurations for\n   * applications and software bundled with Amazon EMR.\n   *\n   * See the RunJobFlow API for complete documentation on input parameters\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_Configuration.html\n   *\n   */\n  export interface ConfigurationProperty {\n    /**\n     * The classification within a configuration.\n     *\n     * @default No classification\n     */\n    readonly classification?: string;\n\n    /**\n     * A set of properties specified within a configuration classification.\n     *\n     * @default No properties\n     */\n    readonly properties?: { [key: string]: string };\n\n    /**\n     * A list of additional configurations to apply within a configuration object.\n     *\n     * @default No configurations\n     */\n    readonly configurations?: ConfigurationProperty[];\n  }\n\n  /**\n   * Attributes for Kerberos configuration when Kerberos authentication is enabled using a security configuration.\n   *\n   * See the RunJobFlow API for complete documentation on input parameters\n   *\n   * @see https://docs.aws.amazon.com/emr/latest/APIReference/API_KerberosAttributes.html\n   *\n   */\n  export interface KerberosAttributesProperty {\n    /**\n     * The Active Directory password for ADDomainJoinUser.\n     *\n     * @default No adDomainJoinPassword\n     */\n    readonly adDomainJoinPassword?: string;\n\n    /**\n     * Required only when establishing a cross-realm trust with an Active Directory domain. A user with sufficient privileges to join\n     * resources to the domain.\n     *\n     * @default No adDomainJoinUser\n     */\n    readonly adDomainJoinUser?: string;\n\n    /**\n     * Required only when establishing a cross-realm trust with a KDC in a different realm. The cross-realm principal password, which\n     * must be identical across realms.\n     *\n     * @default No crossRealmTrustPrincipalPassword\n     */\n    readonly crossRealmTrustPrincipalPassword?: string;\n\n    /**\n     * The password used within the cluster for the kadmin service on the cluster-dedicated KDC, which maintains Kerberos principals,\n     * password policies, and keytabs for the cluster.\n     *\n     * @default No kdcAdminPassword\n     */\n    readonly kdcAdminPassword?: string;\n\n    /**\n     * The name of the Kerberos realm to which all nodes in a cluster belong. For example, EC2.INTERNAL.\n     */\n    readonly realm: string;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
