{
  "version": 3,
  "sources": ["stop-query-execution.ts"],
  "sourcesContent": ["import * as iam from '../../../aws-iam';\nimport * as sfn from '../../../aws-stepfunctions';\nimport { Construct } from 'constructs';\nimport { integrationResourceArn, validatePatternSupported } from '../private/task-utils';\n\n/**\n * Properties for stoping a Query Execution\n */\nexport interface AthenaStopQueryExecutionProps extends sfn.TaskStateBaseProps {\n  /**\n   * Query that will be stopped\n   */\n  readonly queryExecutionId: string;\n}\n\n/**\n * Stop an Athena Query Execution as a Task\n *\n * @see https://docs.aws.amazon.com/step-functions/latest/dg/connect-athena.html\n */\nexport class AthenaStopQueryExecution extends sfn.TaskStateBase {\n\n  private static readonly SUPPORTED_INTEGRATION_PATTERNS: sfn.IntegrationPattern[] = [\n    sfn.IntegrationPattern.REQUEST_RESPONSE,\n  ];\n\n  protected readonly taskMetrics?: sfn.TaskMetricsConfig;\n  protected readonly taskPolicies?: iam.PolicyStatement[];\n\n  private readonly integrationPattern: sfn.IntegrationPattern;\n\n  constructor(scope: Construct, id: string, private readonly props: AthenaStopQueryExecutionProps) {\n    super(scope, id, props);\n    this.integrationPattern = props.integrationPattern ?? sfn.IntegrationPattern.REQUEST_RESPONSE;\n\n    validatePatternSupported(this.integrationPattern, AthenaStopQueryExecution.SUPPORTED_INTEGRATION_PATTERNS);\n\n    this.taskPolicies = [\n      new iam.PolicyStatement({\n        resources: ['*'], // Grant access to allow user to stop queries on all workgroups as no workgroup defined in request https://docs.aws.amazon.com/athena/latest/ug/workgroups-iam-policy.html\n        actions: ['athena:stopQueryExecution'],\n      }),\n    ];\n  }\n\n  /**\n   * Provides the Athena stop query execution service integration task configuration\n   */\n  /**\n   * @internal\n   */\n  protected _renderTask(): any {\n    return {\n      Resource: integrationResourceArn('athena', 'stopQueryExecution', this.integrationPattern),\n      Parameters: sfn.FieldUtils.renderObject({\n        QueryExecutionId: this.props.queryExecutionId,\n      }),\n    };\n  }\n}\n\n"],
  "mappings": "kOAAA,IAAA,QAAA,kBAAA,EACA,IAAA,QAAA,4BAAA,EAEA,aAAA,QAAA,uBAAA,EAiBA,MAAa,gCAAiC,KAAI,aAAa,CAW7D,YAAY,MAAkB,GAA6B,MAAoC,QAC7F,MAAM,MAAO,GAAI,KAAK,EADmC,KAAA,MAAA,uGAEzD,KAAK,mBAAkB,IAAG,MAAM,sBAAkB,MAAA,KAAA,OAAA,GAAI,IAAI,mBAAmB,iBAE7E,aAAA,yBAAyB,KAAK,mBAAoB,yBAAyB,8BAA8B,EAEzG,KAAK,aAAe,CAClB,GAAI,KAAI,gBAAgB,CACtB,UAAW,CAAC,GAAG,EACf,QAAS,CAAC,2BAA2B,EACtC,GAUK,aAAW,CACnB,MAAO,CACL,SAAU,aAAA,uBAAuB,SAAU,qBAAsB,KAAK,kBAAkB,EACxF,WAAY,IAAI,WAAW,aAAa,CACtC,iBAAkB,KAAK,MAAM,iBAC9B,IApCP,QAAA,yBAAA,kKAE0B,yBAAA,+BAA2D,CACjF,IAAI,mBAAmB",
  "names": []
}
