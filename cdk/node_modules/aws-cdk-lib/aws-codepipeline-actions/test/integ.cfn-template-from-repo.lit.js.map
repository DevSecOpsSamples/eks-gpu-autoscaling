{
  "version": 3,
  "sources": ["integ.cfn-template-from-repo.lit.ts"],
  "sourcesContent": ["import * as codecommit from '../../aws-codecommit';\nimport * as codepipeline from '../../aws-codepipeline';\nimport * as cdk from '../../core';\nimport * as cpactions from '../lib';\n\nconst app = new cdk.App();\nconst stack = new cdk.Stack(app, 'aws-cdk-codepipeline-cloudformation');\n\n/// !show\n// Source stage: read from repository\nconst repo = new codecommit.Repository(stack, 'TemplateRepo', {\n  repositoryName: 'template-repo',\n});\nconst sourceOutput = new codepipeline.Artifact('SourceArtifact');\nconst source = new cpactions.CodeCommitSourceAction({\n  actionName: 'Source',\n  repository: repo,\n  output: sourceOutput,\n  trigger: cpactions.CodeCommitTrigger.POLL,\n});\nconst sourceStage = {\n  stageName: 'Source',\n  actions: [source],\n};\n\n// Deployment stage: create and deploy changeset with manual approval\nconst stackName = 'OurStack';\nconst changeSetName = 'StagedChangeSet';\n\nconst prodStage = {\n  stageName: 'Deploy',\n  actions: [\n    new cpactions.CloudFormationCreateReplaceChangeSetAction({\n      actionName: 'PrepareChanges',\n      stackName,\n      changeSetName,\n      adminPermissions: true,\n      templatePath: sourceOutput.atPath('template.yaml'),\n      runOrder: 1,\n    }),\n    new cpactions.ManualApprovalAction({\n      actionName: 'ApproveChanges',\n      runOrder: 2,\n    }),\n    new cpactions.CloudFormationExecuteChangeSetAction({\n      actionName: 'ExecuteChanges',\n      stackName,\n      changeSetName,\n      runOrder: 3,\n    }),\n  ],\n};\n\nnew codepipeline.Pipeline(stack, 'Pipeline', {\n  stages: [\n    sourceStage,\n    prodStage,\n  ],\n});\n/// !hide\n\napp.synth();\n"],
  "mappings": "oEAAA,KAAA,YAAA,QAAA,sBAAA,EACA,aAAA,QAAA,wBAAA,EACA,IAAA,QAAA,YAAA,EACA,UAAA,QAAA,QAAA,EAEM,IAAM,GAAI,KAAI,IACd,MAAQ,GAAI,KAAI,MAAM,IAAK,qCAAqC,EAIhE,KAAO,GAAI,YAAW,WAAW,MAAO,eAAgB,CAC5D,eAAgB,gBACjB,EACK,aAAe,GAAI,cAAa,SAAS,gBAAgB,EACzD,OAAS,GAAI,WAAU,uBAAuB,CAClD,WAAY,SACZ,WAAY,KACZ,OAAQ,aACR,QAAS,UAAU,kBAAkB,KACtC,EACK,YAAc,CAClB,UAAW,SACX,QAAS,CAAC,MAAM,GAIZ,UAAY,WACZ,cAAgB,kBAEhB,UAAY,CAChB,UAAW,SACX,QAAS,CACP,GAAI,WAAU,2CAA2C,CACvD,WAAY,iBACZ,UACA,cACA,iBAAkB,GAClB,aAAc,aAAa,OAAO,eAAe,EACjD,SAAU,EACX,EACD,GAAI,WAAU,qBAAqB,CACjC,WAAY,iBACZ,SAAU,EACX,EACD,GAAI,WAAU,qCAAqC,CACjD,WAAY,iBACZ,UACA,cACA,SAAU,EACX,IAIL,GAAI,cAAa,SAAS,MAAO,WAAY,CAC3C,OAAQ,CACN,YACA,WAEH,EAGD,IAAI,MAAK",
  "names": []
}
