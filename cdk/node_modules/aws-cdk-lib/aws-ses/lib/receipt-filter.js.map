{
  "version": 3,
  "sources": ["receipt-filter.ts"],
  "sourcesContent": ["import { Resource } from '../../core';\nimport { Construct } from 'constructs';\nimport { CfnReceiptFilter } from './ses.generated';\n\n/**\n * The policy for the receipt filter.\n */\nexport enum ReceiptFilterPolicy {\n  /**\n   * Allow the ip address or range.\n   */\n  ALLOW = 'Allow',\n\n  /**\n   * Block the ip address or range.\n   */\n  BLOCK = 'Block'\n}\n\n/**\n * Construction properties for a ReceiptFilter.\n */\nexport interface ReceiptFilterProps {\n  /**\n   * The name for the receipt filter.\n   *\n   * @default a CloudFormation generated name\n   */\n  readonly receiptFilterName?: string;\n\n  /**\n   * The ip address or range to filter.\n   *\n   * @default 0.0.0.0/0\n   */\n  readonly ip?: string;\n\n  /**\n   * The policy for the filter.\n   *\n   * @default Block\n   */\n  readonly policy?: ReceiptFilterPolicy;\n}\n\n/**\n * A receipt filter. When instantiated without props, it creates a\n * block all receipt filter.\n */\nexport class ReceiptFilter extends Resource {\n  constructor(scope: Construct, id: string, props: ReceiptFilterProps = {}) {\n    super(scope, id, {\n      physicalName: props.receiptFilterName,\n    });\n\n    new CfnReceiptFilter(this, 'Resource', {\n      filter: {\n        ipFilter: {\n          cidr: props.ip || '0.0.0.0/0',\n          policy: props.policy || ReceiptFilterPolicy.BLOCK,\n        },\n        name: this.physicalName,\n      },\n    });\n  }\n}\n\n/**\n * Construction properties for am AllowListReceiptFilter.\n */\nexport interface AllowListReceiptFilterProps {\n  /**\n   * A list of ip addresses or ranges to allow list.\n   */\n  readonly ips: string[];\n}\n\n/**\n * An allow list receipt filter.\n */\nexport class AllowListReceiptFilter extends Construct {\n  constructor(scope: Construct, id: string, props: AllowListReceiptFilterProps) {\n    super(scope, id);\n\n    new ReceiptFilter(this, 'BlockAll');\n\n    props.ips.forEach(ip => {\n      new ReceiptFilter(this, `Allow${ip.replace(/[^\\d]/g, '')}`, {\n        ip,\n        policy: ReceiptFilterPolicy.ALLOW,\n      });\n    });\n  }\n}\n\n/**\n * Construction properties for a WhiteListReceiptFilter.\n * @deprecated use `AllowListReceiptFilterProps`\n */\nexport interface WhiteListReceiptFilterProps extends AllowListReceiptFilterProps { }\n\n/**\n * An allow list receipt filter.\n * @deprecated use `AllowListReceiptFilter`\n */\nexport class WhiteListReceiptFilter extends AllowListReceiptFilter {\n  constructor(scope: Construct, id: string, props: WhiteListReceiptFilterProps) {\n    super(scope, id, props);\n  }\n}\n"],
  "mappings": "oTAAA,OAAA,QAAA,YAAA,EACA,aAAA,QAAA,YAAA,EACA,gBAAA,QAAA,iBAAA,EAKA,GAAY,qBAAZ,AAAA,UAAY,qBAAmB,CAI7B,qBAAA,MAAA,QAKA,qBAAA,MAAA,OACF,GAVY,oBAAA,QAAA,qBAAA,SAAA,oBAAmB,CAAA,EAAA,EA0C/B,MAAa,qBAAsB,QAAA,QAAQ,CACzC,YAAY,MAAkB,GAAY,MAA4B,CAAA,EAAE,CACtE,MAAM,MAAO,GAAI,CACf,aAAc,MAAM,kBACrB,wEAED,GAAI,iBAAA,iBAAiB,KAAM,WAAY,CACrC,OAAQ,CACN,SAAU,CACR,KAAM,MAAM,IAAM,YAClB,OAAQ,MAAM,QAAU,oBAAoB,OAE9C,KAAM,KAAK,cAEd,GAdL,QAAA,cAAA,iHA+BA,MAAa,8BAA+B,cAAA,SAAS,CACnD,YAAY,MAAkB,GAAY,MAAkC,CAC1E,MAAM,MAAO,EAAE,iFAEf,GAAI,eAAc,KAAM,UAAU,EAElC,MAAM,IAAI,QAAQ,IAAK,CACrB,GAAI,eAAc,KAAM,QAAQ,GAAG,QAAQ,SAAU,EAAE,IAAK,CAC1D,GACA,OAAQ,oBAAoB,MAC7B,CACH,CAAC,GAXL,QAAA,uBAAA,4IAyBA,MAAa,8BAA+B,uBAAsB,CAChE,YAAY,MAAkB,GAAY,MAAkC,CAC1E,MAAM,MAAO,GAAI,KAAK,GAF1B,QAAA,uBAAA",
  "names": []
}
