{
  "version": 3,
  "sources": ["generic-log-driver.ts"],
  "sourcesContent": ["import { Construct } from 'constructs';\nimport { ContainerDefinition, Secret } from '../container-definition';\nimport { LogDriver, LogDriverConfig } from './log-driver';\nimport { removeEmpty, renderLogDriverSecretOptions } from './utils';\n\n/**\n * The configuration to use when creating a log driver.\n */\nexport interface GenericLogDriverProps {\n  /**\n   * The log driver to use for the container. The valid values listed for this parameter are log drivers\n   * that the Amazon ECS container agent can communicate with by default.\n   *\n   * For tasks using the Fargate launch type, the supported log drivers are awslogs and splunk.\n   * For tasks using the EC2 launch type, the supported log drivers are awslogs, syslog, gelf, fluentd, splunk, journald, and json-file.\n   *\n   * For more information about using the awslogs log driver, see\n   * [Using the awslogs Log Driver](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/using_awslogs.html)\n   * in the Amazon Elastic Container Service Developer Guide.\n   */\n  readonly logDriver: string;\n\n  /**\n   * The configuration options to send to the log driver.\n   * @default - the log driver options.\n   */\n  readonly options?: { [key: string]: string };\n\n  /**\n   * The secrets to pass to the log configuration.\n   * @default - no secret options provided.\n   */\n  readonly secretOptions?: { [key: string]: Secret };\n}\n\n/**\n * A log driver that sends logs to the specified driver.\n */\nexport class GenericLogDriver extends LogDriver {\n  /**\n   * The log driver to use for the container. The valid values listed for this parameter are log drivers\n   * that the Amazon ECS container agent can communicate with by default. You cannot use awslogs with the GenericLogDriver.\n   * You must use the AwsLogDriver if you want to use awslogs.\n   *\n   * For tasks using the Fargate launch type, the supported log drivers are awslogs and splunk.\n   * For tasks using the EC2 launch type, the supported log drivers are awslogs, syslog, gelf, fluentd, splunk, journald, and json-file.\n   *\n   */\n  private logDriver: string;\n\n  /**\n   * The configuration options to send to the log driver.\n   */\n  private options: { [key: string]: string };\n\n  /**\n   * The secrets to pass to the log configuration.\n   */\n  private secretOptions?: { [key: string]: Secret };\n\n  /**\n   * Constructs a new instance of the GenericLogDriver class.\n   *\n   * @param props the generic log driver configuration options.\n   */\n  constructor(props: GenericLogDriverProps) {\n    super();\n\n    this.logDriver = props.logDriver;\n    this.options = props.options || {};\n    this.secretOptions = props.secretOptions;\n  }\n\n  /**\n   * Called when the log driver is configured on a container.\n   */\n  public bind(_scope: Construct, _containerDefinition: ContainerDefinition): LogDriverConfig {\n    return {\n      logDriver: this.logDriver,\n      options: removeEmpty(this.options),\n      secretOptions: this.secretOptions && renderLogDriverSecretOptions(this.secretOptions, _containerDefinition.taskDefinition),\n    };\n  }\n}\n"],
  "mappings": "0NAEA,aAAA,QAAA,cAAA,EACA,QAAA,QAAA,SAAA,EAmCA,MAAa,wBAAyB,cAAA,SAAS,CA2B7C,YAAY,MAA4B,CACtC,MAAK,2EAEL,KAAK,UAAY,MAAM,UACvB,KAAK,QAAU,MAAM,SAAW,CAAA,EAChC,KAAK,cAAgB,MAAM,cAMtB,KAAK,OAAmB,qBAAyC,8FAC/D,CACL,UAAW,KAAK,UAChB,QAAS,QAAA,YAAY,KAAK,OAAO,EACjC,cAAe,KAAK,eAAiB,QAAA,6BAA6B,KAAK,cAAe,qBAAqB,cAAc,IA1C/H,QAAA,iBAAA",
  "names": []
}
