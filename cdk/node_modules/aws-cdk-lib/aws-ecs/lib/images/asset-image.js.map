{
  "version": 3,
  "sources": ["asset-image.ts"],
  "sourcesContent": ["import { DockerImageAsset, DockerImageAssetOptions } from '../../../aws-ecr-assets';\nimport { Construct } from 'constructs';\nimport { ContainerDefinition } from '../container-definition';\nimport { ContainerImage, ContainerImageConfig } from '../container-image';\n\n/**\n * The properties for building an AssetImage.\n */\nexport interface AssetImageProps extends DockerImageAssetOptions {\n}\n\n/**\n * An image that will be built from a local directory with a Dockerfile\n */\nexport class AssetImage extends ContainerImage {\n  /**\n   * Constructs a new instance of the AssetImage class.\n   *\n   * @param directory The directory containing the Dockerfile\n   */\n  constructor(private readonly directory: string, private readonly props: AssetImageProps = {}) {\n    super();\n  }\n\n  public bind(scope: Construct, containerDefinition: ContainerDefinition): ContainerImageConfig {\n    const asset = new DockerImageAsset(scope, 'AssetImage', {\n      directory: this.directory,\n      ...this.props,\n    });\n\n    asset.repository.grantPull(containerDefinition.taskDefinition.obtainExecutionRole());\n\n    return {\n      imageName: asset.imageUri,\n    };\n  }\n}\n"],
  "mappings": "oNAAA,iBAAA,QAAA,yBAAA,EAGA,kBAAA,QAAA,oBAAA,EAWA,MAAa,kBAAmB,mBAAA,cAAc,CAM5C,YAA6B,UAAoC,MAAyB,CAAA,EAAE,CAC1F,MAAK,EADsB,KAAA,UAAA,UAAoC,KAAA,MAAA,yEAI1D,KAAK,MAAkB,oBAAwC,sFACpE,KAAM,OAAQ,GAAI,kBAAA,iBAAiB,MAAO,aAAc,CACtD,UAAW,KAAK,aACb,KAAK,MACT,EAED,aAAM,WAAW,UAAU,oBAAoB,eAAe,oBAAmB,CAAE,EAE5E,CACL,UAAW,MAAM,WAnBvB,QAAA,WAAA",
  "names": []
}
