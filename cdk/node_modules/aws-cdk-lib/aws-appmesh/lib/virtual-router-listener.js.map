{
  "version": 3,
  "sources": ["virtual-router-listener.ts"],
  "sourcesContent": ["import { Construct } from 'constructs';\nimport { CfnVirtualRouter } from './appmesh.generated';\nimport { Protocol } from './shared-interfaces';\n\n/**\n * Properties for a VirtualRouter listener\n */\nexport interface VirtualRouterListenerConfig {\n  /**\n   * Single listener config for a VirtualRouter\n   */\n  readonly listener: CfnVirtualRouter.VirtualRouterListenerProperty;\n}\n\n/**\n * Represents the properties needed to define listeners for a VirtualRouter\n */\nexport abstract class VirtualRouterListener {\n  /**\n   * Returns an HTTP Listener for a VirtualRouter\n   *\n   * @param port the optional port of the listener, 8080 by default\n   */\n  public static http(port?: number): VirtualRouterListener {\n    return new VirtualRouterListenerImpl(Protocol.HTTP, port);\n  }\n\n  /**\n   * Returns an HTTP2 Listener for a VirtualRouter\n   *\n   * @param port the optional port of the listener, 8080 by default\n   */\n  public static http2(port?: number): VirtualRouterListener {\n    return new VirtualRouterListenerImpl(Protocol.HTTP2, port);\n  }\n\n  /**\n   * Returns a GRPC Listener for a VirtualRouter\n   *\n   * @param port the optional port of the listener, 8080 by default\n   */\n  public static grpc(port?: number): VirtualRouterListener {\n    return new VirtualRouterListenerImpl(Protocol.GRPC, port);\n  }\n\n  /**\n   * Returns a TCP Listener for a VirtualRouter\n   *\n   * @param port the optional port of the listener, 8080 by default\n   */\n  public static tcp(port?: number): VirtualRouterListener {\n    return new VirtualRouterListenerImpl(Protocol.TCP, port);\n  }\n\n  /**\n   * Called when the VirtualRouterListener type is initialized. Can be used to enforce\n   * mutual exclusivity\n   */\n  public abstract bind(scope: Construct): VirtualRouterListenerConfig;\n}\n\nclass VirtualRouterListenerImpl extends VirtualRouterListener {\n  private readonly protocol: Protocol;\n  private readonly port: number;\n\n  constructor(protocol: Protocol, port?: number) {\n    super();\n    this.protocol = protocol;\n    this.port = port ?? 8080;\n  }\n\n  bind(_scope: Construct): VirtualRouterListenerConfig {\n    return {\n      listener: {\n        portMapping: {\n          port: this.port,\n          protocol: this.protocol,\n        },\n      },\n    };\n  }\n}\n"],
  "mappings": "iKAEA,oBAAA,QAAA,qBAAA,EAeA,MAAsB,qBAAqB,OAM3B,MAAK,KAAa,CAC9B,MAAO,IAAI,2BAA0B,oBAAA,SAAS,KAAM,IAAI,QAQ5C,OAAM,KAAa,CAC/B,MAAO,IAAI,2BAA0B,oBAAA,SAAS,MAAO,IAAI,QAQ7C,MAAK,KAAa,CAC9B,MAAO,IAAI,2BAA0B,oBAAA,SAAS,KAAM,IAAI,QAQ5C,KAAI,KAAa,CAC7B,MAAO,IAAI,2BAA0B,oBAAA,SAAS,IAAK,IAAI,GAlC3D,QAAA,sBAAA,6IA4CA,MAAM,iCAAkC,sBAAqB,CAI3D,YAAY,SAAoB,KAAa,CAC3C,MAAK,EACL,KAAK,SAAW,SAChB,KAAK,KAAO,MAAI,KAAJ,KAAQ,KAGtB,KAAK,OAAiB,CACpB,MAAO,CACL,SAAU,CACR,YAAa,CACX,KAAM,KAAK,KACX,SAAU,KAAK",
  "names": []
}
