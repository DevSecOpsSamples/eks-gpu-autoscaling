{
  "version": 3,
  "sources": ["api.ts"],
  "sourcesContent": ["import * as apigw from '../../aws-apigateway';\nimport * as lambda from '../../aws-lambda';\nimport { Names, Stack } from '../../core';\n\nexport class ApiEventSource implements lambda.IEventSource {\n  constructor(private readonly method: string, private readonly path: string, private readonly options?: apigw.MethodOptions) {\n    if (!path.startsWith('/')) {\n      throw new Error(`Path must start with \"/\": ${path}`);\n    }\n  }\n\n  public bind(target: lambda.IFunction): void {\n    const id = `${Names.nodeUniqueId(target.node)}:ApiEventSourceA7A86A4F`;\n    const stack = Stack.of(target);\n    let api = stack.node.tryFindChild(id) as apigw.RestApi;\n    if (!api) {\n      api = new apigw.RestApi(stack, id, {\n        defaultIntegration: new apigw.LambdaIntegration(target),\n      });\n    }\n\n    const resource = api.root.resourceForPath(this.path);\n    resource.addMethod(this.method, undefined, this.options);\n  }\n}\n"],
  "mappings": "qNAAA,MAAA,QAAA,sBAAA,EAEA,OAAA,QAAA,YAAA,EAEA,MAAa,cAAc,CACzB,YAA6B,OAAiC,KAA+B,QAA6B,CACxH,GAD2B,KAAA,OAAA,OAAiC,KAAA,KAAA,KAA+B,KAAA,QAAA,kFACvF,CAAC,KAAK,WAAW,GAAG,EACtB,KAAM,IAAI,OAAM,6BAA6B,MAAM,EAIhD,KAAK,OAAwB,kEAClC,KAAM,IAAK,GAAG,OAAA,MAAM,aAAa,OAAO,IAAI,2BACtC,MAAQ,OAAA,MAAM,GAAG,MAAM,EAC7B,GAAI,KAAM,MAAM,KAAK,aAAa,EAAE,EACpC,AAAK,KACH,KAAM,GAAI,OAAM,QAAQ,MAAO,GAAI,CACjC,mBAAoB,GAAI,OAAM,kBAAkB,MAAM,EACvD,GAIH,AADiB,IAAI,KAAK,gBAAgB,KAAK,IAAI,EAC1C,UAAU,KAAK,OAAQ,OAAW,KAAK,OAAO,GAlB3D,QAAA,eAAA",
  "names": []
}
