{
  "version": 3,
  "sources": ["elastic-beanstalk-environment-target.ts"],
  "sourcesContent": ["import * as route53 from '../../aws-route53';\nimport * as cdk from '../../core';\nimport { RegionInfo } from '../../region-info';\n\n/**\n * Use an Elastic Beanstalk environment URL as an alias record target.\n * E.g. mysampleenvironment.xyz.us-east-1.elasticbeanstalk.com\n * or mycustomcnameprefix.us-east-1.elasticbeanstalk.com\n *\n * Only supports Elastic Beanstalk environments created after 2016 that have a regional endpoint.\n */\nexport class ElasticBeanstalkEnvironmentEndpointTarget implements route53.IAliasRecordTarget {\n  constructor(private readonly environmentEndpoint: string) {\n  }\n\n  public bind(_record: route53.IRecordSet, _zone?: route53.IHostedZone): route53.AliasRecordTargetConfig {\n    if (cdk.Token.isUnresolved(this.environmentEndpoint)) {\n      throw new Error('Cannot use an EBS alias as `environmentEndpoint`. You must find your EBS environment endpoint via the AWS console. See the Elastic Beanstalk developer guide: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html');\n    }\n\n    const dnsName = this.environmentEndpoint;\n    const subDomains = cdk.Fn.split('.', dnsName);\n    const regionSubdomainIndex = subDomains.length - 3;\n    const region = cdk.Fn.select(regionSubdomainIndex, subDomains);\n    const { ebsEnvEndpointHostedZoneId: hostedZoneId } = RegionInfo.get(region);\n\n    if (!hostedZoneId || !dnsName) {\n      throw new Error(`Elastic Beanstalk environment target is not supported for the \"${region}\" region.`);\n    }\n\n    return {\n      hostedZoneId,\n      dnsName,\n    };\n  }\n}\n"],
  "mappings": "gPACA,IAAA,QAAA,YAAA,EACA,cAAA,QAAA,mBAAA,EASA,MAAa,yCAAyC,CACpD,YAA6B,oBAA2B,CAA3B,KAAA,oBAAA,oBAGtB,KAAK,QAA6B,MAA2B,CAClE,0IAAI,IAAI,MAAM,aAAa,KAAK,mBAAmB,EACjD,KAAM,IAAI,OAAM,yOAAyO,EAG3P,KAAM,SAAU,KAAK,oBACf,WAAa,IAAI,GAAG,MAAM,IAAK,OAAO,EACtC,qBAAuB,WAAW,OAAS,EAC3C,OAAS,IAAI,GAAG,OAAO,qBAAsB,UAAU,EACvD,CAAE,2BAA4B,cAAiB,cAAA,WAAW,IAAI,MAAM,EAE1E,GAAI,CAAC,cAAgB,CAAC,QACpB,KAAM,IAAI,OAAM,kEAAkE,iBAAiB,EAGrG,MAAO,CACL,aACA,UArBN,QAAA,0CAAA",
  "names": []
}
