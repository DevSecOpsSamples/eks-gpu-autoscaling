{
  "version": 3,
  "sources": ["cfn-utils-provider.ts"],
  "sourcesContent": ["import { Construct } from 'constructs';\nimport { CustomResource } from '../custom-resource';\nimport { CustomResourceProvider, CustomResourceProviderRuntime } from '../custom-resource-provider';\nimport { CfnUtilsResourceType } from './cfn-utils-provider/consts';\n\n/**\n * A custom resource provider for CFN utilities such as `CfnJson`.\n */\nexport class CfnUtilsProvider extends Construct {\n  public static getOrCreate(scope: Construct) {\n    return CustomResourceProvider.getOrCreate(scope, 'AWSCDKCfnUtilsProvider', {\n      runtime: CustomResourceProviderRuntime.NODEJS_12_X,\n      codeDirectory: `${__dirname}/cfn-utils-provider`,\n    });\n  }\n}\n\n/**\n * Utility functions provided by the CfnUtilsProvider\n */\nexport abstract class CfnUtils {\n  /**\n   * Encode a structure to JSON at CloudFormation deployment time\n   *\n   * This would have been suitable for the JSON-encoding of abitrary structures, however:\n   *\n   * - It uses a custom resource to do the encoding, and we'd rather not use a custom\n   *   resource if we can avoid it.\n   * - It cannot be used to encode objects where the keys of the objects can contain\n   *   tokens--because those cannot be represented in the JSON encoding that CloudFormation\n   *   templates use.\n   *\n   * This helper is used by `CloudFormationLang.toJSON()` if and only if it encounters\n   * objects that cannot be stringified any other way.\n   */\n  public static stringify(scope: Construct, id: string, value: any): string {\n    const resource = new CustomResource(scope, id, {\n      serviceToken: CfnUtilsProvider.getOrCreate(scope),\n      resourceType: CfnUtilsResourceType.CFN_JSON_STRINGIFY,\n      properties: {\n        Value: value,\n      },\n    });\n\n    return resource.getAttString('Value');\n  }\n}\n"],
  "mappings": "qHAAA,KAAA,cAAA,QAAA,YAAA,EACA,kBAAA,QAAA,oBAAA,EACA,2BAAA,QAAA,6BAAA,EAMA,MAAa,wBAAyB,cAAA,SAAS,OAC/B,aAAY,MAAgB,CACxC,MAAO,4BAAA,uBAAuB,YAAY,MAAO,yBAA0B,CACzE,QAAS,2BAAA,8BAA8B,YACvC,cAAe,GAAG,+BACnB,GALL,QAAA,iBAAA,iBAYA,MAAsB,QAAQ,OAed,WAAU,MAAkB,GAAY,MAAU,CAS9D,MAAO,AARU,IAAI,mBAAA,eAAe,MAAO,GAAI,CAC7C,aAAc,iBAAiB,YAAY,KAAK,EAChD,aAAY,iCACZ,WAAY,CACV,MAAO,OAEV,EAEe,aAAa,OAAO,GAxBxC,QAAA,SAAA",
  "names": []
}
