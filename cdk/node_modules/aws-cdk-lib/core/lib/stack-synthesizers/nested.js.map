{
  "version": 3,
  "sources": ["nested.ts"],
  "sourcesContent": ["import { DockerImageAssetLocation, DockerImageAssetSource, FileAssetLocation, FileAssetSource } from '../assets';\nimport { Stack } from '../stack';\nimport { assertBound } from './_shared';\nimport { StackSynthesizer } from './stack-synthesizer';\nimport { IStackSynthesizer, ISynthesisSession } from './types';\n\n/**\n * Synthesizer for a nested stack\n *\n * Forwards all calls to the parent stack's synthesizer.\n *\n * This synthesizer is automatically used for `NestedStack` constructs.\n * App builder do not need to use this class directly.\n */\nexport class NestedStackSynthesizer extends StackSynthesizer {\n  private stack?: Stack;\n\n  constructor(private readonly parentDeployment: IStackSynthesizer) {\n    super();\n  }\n\n  public bind(stack: Stack): void {\n    if (this.stack !== undefined) {\n      throw new Error('A StackSynthesizer can only be used for one Stack: create a new instance to use with a different Stack');\n    }\n    this.stack = stack;\n  }\n\n  public addFileAsset(asset: FileAssetSource): FileAssetLocation {\n    // Forward to parent deployment. By the magic of cross-stack references any parameter\n    // returned and used will magically be forwarded to the nested stack.\n    return this.parentDeployment.addFileAsset(asset);\n  }\n\n  public addDockerImageAsset(asset: DockerImageAssetSource): DockerImageAssetLocation {\n    // Forward to parent deployment. By the magic of cross-stack references any parameter\n    // returned and used will magically be forwarded to the nested stack.\n    return this.parentDeployment.addDockerImageAsset(asset);\n  }\n\n  public synthesize(session: ISynthesisSession): void {\n    assertBound(this.stack);\n    // Synthesize the template, but don't emit as a cloud assembly artifact.\n    // It will be registered as an S3 asset of its parent instead.\n    this.synthesizeStackTemplate(this.stack, session);\n  }\n}\n"],
  "mappings": "gOAEA,UAAA,QAAA,WAAA,EACA,oBAAA,QAAA,qBAAA,EAWA,MAAa,8BAA+B,qBAAA,gBAAgB,CAG1D,YAA6B,iBAAmC,CAC9D,MAAK,EADsB,KAAA,iBAAA,yFAItB,KAAK,MAAY,CACtB,oDAAI,KAAK,QAAU,OACjB,KAAM,IAAI,OAAM,wGAAwG,EAE1H,KAAK,MAAQ,MAGR,aAAa,MAAsB,mEAGjC,KAAK,iBAAiB,aAAa,KAAK,EAG1C,oBAAoB,MAA6B,0EAG/C,KAAK,iBAAiB,oBAAoB,KAAK,EAGjD,WAAW,QAA0B,gEAC1C,UAAA,YAAY,KAAK,KAAK,EAGtB,KAAK,wBAAwB,KAAK,MAAO,OAAO,GA9BpD,QAAA,uBAAA",
  "names": []
}
