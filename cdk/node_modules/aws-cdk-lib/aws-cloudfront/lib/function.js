"use strict";var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionEventType=exports.Function=exports.FunctionCode=void 0;const jsiiDeprecationWarnings=require("../../.warnings.jsii.js"),JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti"),fs=require("fs"),core_1=require("../../core"),cloudfront_generated_1=require("./cloudfront.generated");class FunctionCode{static fromInline(code){return new InlineCode(code)}static fromFile(options){return jsiiDeprecationWarnings.aws_cdk_lib_aws_cloudfront_FileCodeOptions(options),new FileCode(options)}}exports.FunctionCode=FunctionCode,_a=JSII_RTTI_SYMBOL_1,FunctionCode[_a]={fqn:"aws-cdk-lib.aws_cloudfront.FunctionCode",version:"2.20.0"};class InlineCode extends FunctionCode{constructor(code){super();this.code=code}render(){return this.code}}class FileCode extends FunctionCode{constructor(options){super();this.options=options}render(){return fs.readFileSync(this.options.filePath,{encoding:"utf-8"})}}class Function extends core_1.Resource{constructor(scope,id,props){var _c,_d;super(scope,id);jsiiDeprecationWarnings.aws_cdk_lib_aws_cloudfront_FunctionProps(props),this.functionName=(_c=props.functionName)!==null&&_c!==void 0?_c:this.generateName();const resource=new cloudfront_generated_1.CfnFunction(this,"Resource",{autoPublish:!0,functionCode:props.code.render(),functionConfig:{comment:(_d=props.comment)!==null&&_d!==void 0?_d:this.functionName,runtime:"cloudfront-js-1.0"},name:this.functionName});this.functionArn=resource.attrFunctionArn,this.functionStage=resource.attrStage}static fromFunctionAttributes(scope,id,attrs){return jsiiDeprecationWarnings.aws_cdk_lib_aws_cloudfront_FunctionAttributes(attrs),new class extends core_1.Resource{constructor(){super(...arguments);this.functionName=attrs.functionName,this.functionArn=attrs.functionArn}}(scope,id)}generateName(){const name=core_1.Stack.of(this).region+core_1.Names.uniqueId(this);return name.length>64?name.substring(0,32)+name.substring(name.length-32):name}}exports.Function=Function,_b=JSII_RTTI_SYMBOL_1,Function[_b]={fqn:"aws-cdk-lib.aws_cloudfront.Function",version:"2.20.0"};var FunctionEventType;(function(FunctionEventType2){FunctionEventType2.VIEWER_REQUEST="viewer-request",FunctionEventType2.VIEWER_RESPONSE="viewer-response"})(FunctionEventType=exports.FunctionEventType||(exports.FunctionEventType={}));
//# sourceMappingURL=function.js.map
