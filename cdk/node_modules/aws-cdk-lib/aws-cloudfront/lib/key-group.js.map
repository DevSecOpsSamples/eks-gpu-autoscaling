{
  "version": 3,
  "sources": ["key-group.ts"],
  "sourcesContent": ["import { IResource, Names, Resource } from '../../core';\nimport { Construct } from 'constructs';\nimport { CfnKeyGroup } from './cloudfront.generated';\nimport { IPublicKey } from './public-key';\n\n/**\n * Represents a Key Group\n */\nexport interface IKeyGroup extends IResource {\n  /**\n   * The ID of the key group.\n   * @attribute\n   */\n  readonly keyGroupId: string;\n}\n\n/**\n * Properties for creating a Public Key\n */\nexport interface KeyGroupProps {\n  /**\n   * A name to identify the key group.\n   * @default - generated from the `id`\n   */\n  readonly keyGroupName?: string;\n\n  /**\n   * A comment to describe the key group.\n   * @default - no comment\n   */\n  readonly comment?: string;\n\n  /**\n   * A list of public keys to add to the key group.\n   */\n  readonly items: IPublicKey[];\n}\n\n/**\n * A Key Group configuration\n *\n * @resource AWS::CloudFront::KeyGroup\n */\nexport class KeyGroup extends Resource implements IKeyGroup {\n\n  /** Imports a Key Group from its id. */\n  public static fromKeyGroupId(scope: Construct, id: string, keyGroupId: string): IKeyGroup {\n    return new class extends Resource implements IKeyGroup {\n      public readonly keyGroupId = keyGroupId;\n    }(scope, id);\n  }\n  public readonly keyGroupId: string;\n\n  constructor(scope: Construct, id: string, props: KeyGroupProps) {\n    super(scope, id);\n\n    const resource = new CfnKeyGroup(this, 'Resource', {\n      keyGroupConfig: {\n        name: props.keyGroupName ?? this.generateName(),\n        comment: props.comment,\n        items: props.items.map(key => key.publicKeyId),\n      },\n    });\n\n    this.keyGroupId = resource.ref;\n  }\n\n  private generateName(): string {\n    const name = Names.uniqueId(this);\n    if (name.length > 80) {\n      return name.substring(0, 40) + name.substring(name.length - 40);\n    }\n    return name;\n  }\n}\n"],
  "mappings": "+MAAA,OAAA,QAAA,YAAA,EAEA,uBAAA,QAAA,wBAAA,EAyCA,MAAa,gBAAiB,QAAA,QAAQ,CAUpC,YAAY,MAAkB,GAAY,MAAoB,QAC5D,MAAM,MAAO,EAAE,0EAEf,KAAM,UAAW,GAAI,wBAAA,YAAY,KAAM,WAAY,CACjD,eAAgB,CACd,KAAI,IAAE,MAAM,gBAAY,MAAA,KAAA,OAAA,GAAI,KAAK,aAAY,EAC7C,QAAS,MAAM,QACf,MAAO,MAAM,MAAM,IAAI,KAAO,IAAI,WAAW,GAEhD,EAED,KAAK,WAAa,SAAS,UAlBf,gBAAe,MAAkB,GAAY,WAAkB,CAC3E,MAAO,IAAI,cAAc,QAAA,QAAQ,CAAtB,aAAA,qBACO,KAAA,WAAa,UAC/B,GAAE,MAAO,EAAE,EAkBL,cAAY,CAClB,KAAM,MAAO,OAAA,MAAM,SAAS,IAAI,EAChC,MAAI,MAAK,OAAS,GACT,KAAK,UAAU,EAAG,EAAE,EAAI,KAAK,UAAU,KAAK,OAAS,EAAE,EAEzD,MA7BX,QAAA,SAAA",
  "names": []
}
