{
  "version": 3,
  "sources": ["k8s-object-value.ts"],
  "sourcesContent": ["import { CustomResource, Token, Duration } from '../../core';\nimport { Construct } from 'constructs';\nimport { ICluster } from './cluster';\nimport { KubectlProvider } from './kubectl-provider';\n\n/**\n * Properties for KubernetesObjectValue.\n */\nexport interface KubernetesObjectValueProps {\n  /**\n   * The EKS cluster to fetch attributes from.\n   *\n   * [disable-awslint:ref-via-interface]\n   */\n  readonly cluster: ICluster;\n\n  /**\n   * The object type to query. (e.g 'service', 'pod'...)\n   */\n  readonly objectType: string;\n\n  /**\n   * The name of the object to query.\n   */\n  readonly objectName: string;\n\n  /**\n   * The namespace the object belongs to.\n   *\n   * @default 'default'\n   */\n  readonly objectNamespace?: string;\n\n  /**\n   * JSONPath to the specific value.\n   *\n   * @see https://kubernetes.io/docs/reference/kubectl/jsonpath/\n   */\n  readonly jsonPath: string;\n\n  /**\n   * Timeout for waiting on a value.\n   *\n   * @default Duration.minutes(5)\n   */\n  readonly timeout?: Duration;\n\n}\n\n/**\n * Represents a value of a specific object deployed in the cluster.\n * Use this to fetch any information available by the `kubectl get` command.\n */\nexport class KubernetesObjectValue extends Construct {\n  /**\n   * The CloudFormation reosurce type.\n   */\n  public static readonly RESOURCE_TYPE = 'Custom::AWSCDK-EKS-KubernetesObjectValue';\n\n  private _resource: CustomResource;\n\n  constructor(scope: Construct, id: string, props: KubernetesObjectValueProps) {\n    super(scope, id);\n\n    const provider = KubectlProvider.getOrCreate(this, props.cluster);\n\n    this._resource = new CustomResource(this, 'Resource', {\n      resourceType: KubernetesObjectValue.RESOURCE_TYPE,\n      serviceToken: provider.serviceToken,\n      properties: {\n        ClusterName: props.cluster.clusterName,\n        RoleArn: provider.roleArn,\n        ObjectType: props.objectType,\n        ObjectName: props.objectName,\n        ObjectNamespace: props.objectNamespace ?? 'default',\n        JsonPath: props.jsonPath,\n        TimeoutSeconds: (props?.timeout ?? Duration.minutes(5)).toSeconds(),\n      },\n    });\n\n  }\n\n  /**\n   * The value as a string token.\n   */\n  public get value(): string {\n    return Token.asString(this._resource.getAtt('Value'));\n  }\n}\n"],
  "mappings": "4NAAA,OAAA,QAAA,YAAA,EACA,aAAA,QAAA,YAAA,EAEA,mBAAA,QAAA,oBAAA,EAkDA,MAAa,6BAA8B,cAAA,SAAS,CAQlD,YAAY,MAAkB,GAAY,MAAiC,WACzE,MAAM,MAAO,EAAE,gFAEf,KAAM,UAAW,mBAAA,gBAAgB,YAAY,KAAM,MAAM,OAAO,EAEhE,KAAK,UAAY,GAAI,QAAA,eAAe,KAAM,WAAY,CACpD,aAAc,sBAAsB,cACpC,aAAc,SAAS,aACvB,WAAY,CACV,YAAa,MAAM,QAAQ,YAC3B,QAAS,SAAS,QAClB,WAAY,MAAM,WAClB,WAAY,MAAM,WAClB,gBAAe,IAAE,MAAM,mBAAe,MAAA,KAAA,OAAA,GAAI,UAC1C,SAAU,MAAM,SAChB,eAAgB,KAAC,OAAK,KAAA,OAAL,MAAO,WAAO,MAAA,KAAA,OAAA,GAAI,OAAA,SAAS,QAAQ,CAAC,GAAG,UAAS,GAEpE,KAOQ,QAAK,CACd,MAAO,QAAA,MAAM,SAAS,KAAK,UAAU,OAAO,OAAO,CAAC,GAjCxD,QAAA,sBAAA,yIAIyB,sBAAA,cAAgB",
  "names": []
}
