{
  "version": 3,
  "sources": ["oidc-provider.ts"],
  "sourcesContent": ["import * as iam from '../../aws-iam';\nimport { Construct } from 'constructs';\n\n/**\n * Initialization properties for `OpenIdConnectProvider`.\n */\nexport interface OpenIdConnectProviderProps {\n  /**\n   * The URL of the identity provider. The URL must begin with https:// and\n   * should correspond to the iss claim in the provider's OpenID Connect ID\n   * tokens. Per the OIDC standard, path components are allowed but query\n   * parameters are not. Typically the URL consists of only a hostname, like\n   * https://server.example.org or https://example.com.\n   *\n   * You can find your OIDC Issuer URL by:\n   * aws eks describe-cluster --name %cluster_name% --query \"cluster.identity.oidc.issuer\" --output text\n   */\n  readonly url: string;\n}\n\n/**\n * IAM OIDC identity providers are entities in IAM that describe an external\n * identity provider (IdP) service that supports the OpenID Connect (OIDC)\n * standard, such as Google or Salesforce. You use an IAM OIDC identity provider\n * when you want to establish trust between an OIDC-compatible IdP and your AWS\n * account.\n *\n * This implementation has default values for thumbprints and clientIds props\n * that will be compatible with the eks cluster\n *\n * @see http://openid.net/connect\n * @see https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_oidc.html\n *\n * @resource AWS::CloudFormation::CustomResource\n */\nexport class OpenIdConnectProvider extends iam.OpenIdConnectProvider {\n  /**\n   * Defines an OpenID Connect provider.\n   * @param scope The definition scope\n   * @param id Construct ID\n   * @param props Initialization properties\n   */\n  public constructor(scope: Construct, id: string, props: OpenIdConnectProviderProps) {\n    /**\n     * For some reason EKS isn't validating the root certificate but a intermediate certificate\n     * which is one level up in the tree. Because of the a constant thumbprint value has to be\n     * stated with this OpenID Connect provider. The certificate thumbprint is the same for all the regions.\n     */\n    const thumbprints = ['9e99a48a9960b14926bb7f3b02e22da2b0ab7280'];\n\n    const clientIds = ['sts.amazonaws.com'];\n\n    super(scope, id, {\n      url: props.url,\n      thumbprints,\n      clientIds,\n    });\n  }\n}\n"],
  "mappings": "4NAAA,IAAA,QAAA,eAAA,EAmCA,MAAa,6BAA8B,KAAI,qBAAqB,CAOlE,YAAmB,MAAkB,GAAY,MAAiC,+EAMhF,KAAM,aAAc,CAAC,0CAA0C,EAEzD,UAAY,CAAC,mBAAmB,EAEtC,MAAM,MAAO,GAAI,CACf,IAAK,MAAM,IACX,YACA,UACD,GArBL,QAAA,sBAAA",
  "names": []
}
