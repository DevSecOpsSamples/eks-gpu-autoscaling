{
  "version": 3,
  "sources": ["requestvalidator.ts"],
  "sourcesContent": ["import { IResource, Resource } from '../../core';\nimport { Construct } from 'constructs';\nimport { CfnRequestValidator, CfnRequestValidatorProps } from './apigateway.generated';\nimport { IRestApi, RestApi } from './restapi';\n\nexport interface IRequestValidator extends IResource {\n  /**\n   * ID of the request validator, such as abc123\n   *\n   * @attribute\n   */\n  readonly requestValidatorId: string;\n}\n\nexport interface RequestValidatorOptions {\n  /**\n   * The name of this request validator.\n   *\n   * @default None\n   */\n  readonly requestValidatorName?: string;\n\n  /**\n   * Indicates whether to validate the request body according to\n   * the configured schema for the targeted API and method.\n   *\n   * @default false\n   */\n  readonly validateRequestBody?: boolean;\n\n  /**\n   * Indicates whether to validate request parameters.\n   *\n   * @default false\n   */\n  readonly validateRequestParameters?: boolean;\n}\n\nexport interface RequestValidatorProps extends RequestValidatorOptions {\n  /**\n   * The rest API that this model is part of.\n   *\n   * The reason we need the RestApi object itself and not just the ID is because the model\n   * is being tracked by the top-level RestApi object for the purpose of calculating it's\n   * hash to determine the ID of the deployment. This allows us to automatically update\n   * the deployment when the model of the REST API changes.\n   */\n  readonly restApi: IRestApi;\n}\n\nexport class RequestValidator extends Resource implements IRequestValidator {\n  public static fromRequestValidatorId(scope: Construct, id: string, requestValidatorId: string): IRequestValidator {\n    class Import extends Resource implements IRequestValidator {\n      public readonly requestValidatorId = requestValidatorId;\n    }\n\n    return new Import(scope, id);\n  }\n\n  /**\n   * ID of the request validator, such as abc123\n   *\n   * @attribute\n   */\n  public readonly requestValidatorId: string;\n\n  constructor(scope: Construct, id: string, props: RequestValidatorProps) {\n    super(scope, id, {\n      physicalName: props.requestValidatorName,\n    });\n\n    const validatorProps: CfnRequestValidatorProps = {\n      name: this.physicalName,\n      restApiId: props.restApi.restApiId,\n      validateRequestBody: props.validateRequestBody,\n      validateRequestParameters: props.validateRequestParameters,\n    };\n\n    const resource = new CfnRequestValidator(this, 'Resource', validatorProps);\n\n    this.requestValidatorId = resource.ref;\n\n    const deployment = (props.restApi instanceof RestApi) ? props.restApi.latestDeployment : undefined;\n    if (deployment) {\n      deployment.node.addDependency(resource);\n      deployment.addToLogicalId({ validator: validatorProps });\n    }\n  }\n}"],
  "mappings": "uNAAA,OAAA,QAAA,YAAA,EAEA,uBAAA,QAAA,wBAAA,EACA,UAAA,QAAA,WAAA,EA+CA,MAAa,wBAAyB,QAAA,QAAQ,CAgB5C,YAAY,MAAkB,GAAY,MAA4B,CACpE,MAAM,MAAO,GAAI,CACf,aAAc,MAAM,qBACrB,kFAED,KAAM,gBAA2C,CAC/C,KAAM,KAAK,aACX,UAAW,MAAM,QAAQ,UACzB,oBAAqB,MAAM,oBAC3B,0BAA2B,MAAM,2BAG7B,SAAW,GAAI,wBAAA,oBAAoB,KAAM,WAAY,cAAc,EAEzE,KAAK,mBAAqB,SAAS,IAEnC,KAAM,YAAc,MAAM,kBAAmB,WAAA,QAAW,MAAM,QAAQ,iBAAmB,OACzF,AAAI,YACF,YAAW,KAAK,cAAc,QAAQ,EACtC,WAAW,eAAe,CAAE,UAAW,cAAc,CAAE,SAlC7C,wBAAuB,MAAkB,GAAY,mBAA0B,CAC3F,MAAM,cAAe,QAAA,QAAQ,CAA7B,aAAA,qBACkB,KAAA,mBAAqB,kBACvC,EAEA,MAAO,IAAI,QAAO,MAAO,EAAE,GAN/B,QAAA,iBAAA",
  "names": []
}
