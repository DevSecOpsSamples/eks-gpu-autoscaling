"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.QueueBase=void 0;const jsiiDeprecationWarnings=require("../../.warnings.jsii.js"),JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti"),iam=require("../../aws-iam"),core_1=require("../../core"),policy_1=require("./policy");class QueueBase extends core_1.Resource{constructor(scope,id,props={}){super(scope,id,props);jsiiDeprecationWarnings.aws_cdk_lib_ResourceProps(props),this.node.addValidation({validate:()=>{var _b,_c;return(_c=(_b=this.policy)===null||_b===void 0?void 0:_b.document.validateForResourcePolicy())!==null&&_c!==void 0?_c:[]}})}addToResourcePolicy(statement){return jsiiDeprecationWarnings.aws_cdk_lib_aws_iam_PolicyStatement(statement),!this.policy&&this.autoCreatePolicy&&(this.policy=new policy_1.QueuePolicy(this,"Policy",{queues:[this]})),this.policy?(this.policy.document.addStatements(statement),{statementAdded:!0,policyDependable:this.policy}):{statementAdded:!1}}grantConsumeMessages(grantee){jsiiDeprecationWarnings.aws_cdk_lib_aws_iam_IGrantable(grantee);const ret=this.grant(grantee,"sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes");return this.encryptionMasterKey&&this.encryptionMasterKey.grantDecrypt(grantee),ret}grantSendMessages(grantee){jsiiDeprecationWarnings.aws_cdk_lib_aws_iam_IGrantable(grantee);const ret=this.grant(grantee,"sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl");return this.encryptionMasterKey&&this.encryptionMasterKey.grantEncryptDecrypt(grantee),ret}grantPurge(grantee){return jsiiDeprecationWarnings.aws_cdk_lib_aws_iam_IGrantable(grantee),this.grant(grantee,"sqs:PurgeQueue","sqs:GetQueueAttributes","sqs:GetQueueUrl")}grant(grantee,...actions){return jsiiDeprecationWarnings.aws_cdk_lib_aws_iam_IGrantable(grantee),iam.Grant.addToPrincipalOrResource({grantee,actions,resourceArns:[this.queueArn],resource:this})}}exports.QueueBase=QueueBase,_a=JSII_RTTI_SYMBOL_1,QueueBase[_a]={fqn:"aws-cdk-lib.aws_sqs.QueueBase",version:"2.20.0"};
//# sourceMappingURL=queue-base.js.map
