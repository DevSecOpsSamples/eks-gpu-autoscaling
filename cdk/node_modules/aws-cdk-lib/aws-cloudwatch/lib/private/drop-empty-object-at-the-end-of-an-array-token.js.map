{
  "version": 3,
  "sources": ["drop-empty-object-at-the-end-of-an-array-token.ts"],
  "sourcesContent": ["import * as cdk from '../../../core';\nimport { dropUndefined } from './object';\n\n/**\n * A Token object that will drop the last element of an array if it is an empty object\n *\n * Necessary to prevent options objects that only contain \"region\" and \"account\" keys\n * that evaluate to \"undefined\" from showing up in the rendered JSON.\n */\nexport class DropEmptyObjectAtTheEndOfAnArray implements cdk.IResolvable, cdk.IPostProcessor {\n  public readonly creationStack: string[];\n\n  constructor(private readonly value: any) {\n    this.creationStack = cdk.captureStackTrace();\n  }\n\n  public resolve(context: cdk.IResolveContext) {\n    context.registerPostProcessor(this);\n    return context.resolve(this.value);\n  }\n\n  public postProcess(o: any, _context: cdk.IResolveContext): any {\n    if (!Array.isArray(o)) { return o; }\n\n    const lastEl = o[o.length - 1];\n\n    if (typeof lastEl === 'object' && lastEl !== null && Object.keys(dropUndefined(lastEl)).length === 0) {\n      return o.slice(0, o.length - 1);\n    }\n\n    return o;\n  }\n}\n"],
  "mappings": "oHAAA,KAAA,KAAA,QAAA,eAAA,EACA,SAAA,QAAA,UAAA,EAQA,MAAa,gCAAgC,CAG3C,YAA6B,MAAU,CAAV,KAAA,MAAA,MAC3B,KAAK,cAAgB,IAAI,kBAAiB,EAGrC,QAAQ,QAA4B,CACzC,eAAQ,sBAAsB,IAAI,EAC3B,QAAQ,QAAQ,KAAK,KAAK,EAG5B,YAAY,EAAQ,SAA6B,CACtD,GAAI,CAAC,MAAM,QAAQ,CAAC,EAAK,MAAO,GAEhC,KAAM,QAAS,EAAE,EAAE,OAAS,GAE5B,MAAI,OAAO,SAAW,UAAY,SAAW,MAAQ,OAAO,KAAK,SAAA,cAAc,MAAM,CAAC,EAAE,SAAW,EAC1F,EAAE,MAAM,EAAG,EAAE,OAAS,CAAC,EAGzB,GArBX,QAAA,iCAAA",
  "names": []
}
