import * as cdk from 'aws-cdk-lib';
import { StackProps } from 'aws-cdk-lib';
import { Construct } from "constructs";
import * as cdkpipelines from 'aws-cdk-lib/pipelines';
import { ApplicationRepository, AsyncStackBuilder, StackBuilder } from '../spi';
export { cdkpipelines };
/**
 * credentialsType is excluded and the only supported credentialsSecret is a plaintext GitHub OAuth token.
 * repoUrl
 */
export interface GitHubSourceRepository extends Omit<ApplicationRepository, "credentialsType"> {
    /**
     * A GitHub OAuth token to use for authentication stored with AWS Secret Manager.
     * The provided name will be looked up using the following:
     * ```ts
     * const credentials = cdk.SecretValue.secretsManager('my-github-token');
     * ```
     *
     * The GitHub Personal Access Token should have these scopes:
     *
     * * **repo** - to read the repository
     * * **admin:repo_hook** - if you plan to use webhooks (true by default)
     *
     * @see https://docs.aws.amazon.com/codepipeline/latest/userguide/GitHub-create-personal-token-CLI.html
     */
    credentialsSecretName: string;
}
/**
 * Props for the Pipeline.
 */
export declare type PipelineProps = {
    /**
     * The name for the pipeline.
     */
    name: string;
    /**
     * The owner of the repository for the pipeline (GitHub handle).
     */
    owner: string;
    /**
     * Repository for the pipeline
     */
    repository: GitHubSourceRepository;
    /**
     * Pipeline stages and options.
     */
    stages: WaveStage[];
    /**
     * Waves for the pipeline. Stages inside the wave are executed in parallel.
     */
    waves: PipelineWave[];
};
/**
 * Stack stage is a builder construct to allow adding stages to a pipeline. Each stage is expected to produce a stack.
 */
export interface StackStage {
    /**
     * id of the stage
     */
    id: string;
    /**
     * Builder that can produce a stack which will be deployed as part of the stage
     */
    stackBuilder: StackBuilder;
    /**
     * Optional stage properties, such as {manualApprovals: true} which can control stage transitions.
     */
    stageProps?: cdkpipelines.AddStageOpts;
}
/**
 * Internal interface for wave stages
 */
interface WaveStage extends StackStage {
    /**
     * Wave id if this stage is part of a wave. Not required if stage is supplied
     */
    waveId?: string;
}
/**
 * Represents wave configuration
 */
export interface PipelineWave {
    id: string;
    stages: StackStage[];
    props?: cdkpipelines.WaveProps;
}
/**
 * Builder for CodePipeline.
 */
export declare class CodePipelineBuilder implements StackBuilder {
    private props;
    constructor();
    name(name: string): CodePipelineBuilder;
    owner(owner: string): CodePipelineBuilder;
    repository(repo: GitHubSourceRepository): CodePipelineBuilder;
    /**
     * Adds standalone pipeline stages (in the order of invocation and elements in the input array)
     * @param stackStages
     * @returns
     */
    stage(...stackStages: StackStage[]): CodePipelineBuilder;
    /**
     * Adds wave(s) in the order specified. All stages in the wave can be executed in parallel, while standalone stages are executed sequentially.
     * @param waves
     * @returns
     */
    wave(...waves: PipelineWave[]): CodePipelineBuilder;
    build(scope: Construct, id: string, stackProps?: cdk.StackProps): cdk.Stack;
}
/**
 * Pipeline stack is generating a self-mutating pipeline to faciliate full CI/CD experience with the platform
 * for infrastructure changes.
 */
export declare class CodePipelineStack extends cdk.Stack {
    static readonly USAGE_ID = "qs-1s1r465k6";
    static builder(): CodePipelineBuilder;
    constructor(scope: Construct, pipelineProps: PipelineProps, id: string, props?: StackProps);
}
export declare class ApplicationStage extends cdk.Stage {
    private asyncTask;
    constructor(scope: cdk.Stack, id: string, builder: StackBuilder | AsyncStackBuilder, props?: cdk.StageProps);
    waitForAsyncTasks(): Promise<ApplicationStage>;
}
